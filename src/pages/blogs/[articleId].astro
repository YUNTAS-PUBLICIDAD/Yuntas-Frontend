---
// Importaciones
import Layout from "../../layouts/Layout.astro";
import BlogFader from "../../components/blog/Fader";

// 游대 Generar rutas din치micas desde la API
export async function getStaticPaths() {
  const res = await fetch("https://apiyuntas.yuntaspublicidad.com/api/blogs");
  const apiResponse = await res.json();
  const blogs = apiResponse.data;

  return blogs.map((blog:any) => ({
    params: { articleId: blog.id.toString() },
  }));
}

// Obtener par치metro din치mico
const { articleId } = Astro.params;

// Obtener contenido del art칤culo desde la API
const res = await fetch("https://apiyuntas.yuntaspublicidad.com/api/blogs");
const apiResponse = await res.json();
const blogs = apiResponse.data;

const article = blogs.find((b:any) => b.id.toString() === articleId);

if (!article) {
  throw new Error(`Art칤culo no encontrado: ${articleId}`);
}

// 游닇 Mapeo de metadatos espec칤ficos por ID de art칤culo
const metadataMap: Record<string, { title: string; description: string }> = {
  "1": {
    title: "Innovaci칩n con Panel de Fibra de Bamb칰 para Dise침o y Construcci칩n Ecol칩gica",
    description: "Innovaci칩n con Panel de Fibra de Bamb칰 para Dise침o y Construcci칩n Ecol칩gica"
  },
  "2": {
    title: "Soldadora Lingba: Eficiencia y Precisi칩n en Soldadura | Yuntas Publicidad",
    description: "En el blog de Yuntas Publicidad, exploramos la soldadora Lingba. Descubre sus innovadoras caracter칤sticas y c칩mo transformar치 la eficiencia, calidad y precisi칩n."
  },
  "3": {
    title: "Soldadora Spark: Rendimiento Avanzado para Proyectos | Yuntas Publicidad", 
    description: "Explora en Yuntas Publicidad la soldadora Spark, potencia y precisi칩n para tus proyectos. Conoce sus caracter칤sticas avanzadas y optimiza tu soldadura profesional."
  },

  "4": {
    title: "Ventilador Hologr치fico: El Futuro de la Publicidad | Yuntas Publicidad",
    description: "En Yuntas Publicidad, explora el ventilador hologr치fico. Conoce c칩mo esta innovadora tecnolog칤a 3D est치 revolucionando la publicidad y capturando audiencias al instante."
  },
};

// Obtener metadatos espec칤ficos o usar valores por defecto
const metadata = metadataMap[articleId] || {
  title: `${article.titulo} - Blog de Innovaci칩n en Luces LED y Tendencias en Dise침o Sostenible`,
  description: article.descripcion || "Explore el blog de Yuntas Publicidad para conocer a fondo las novedades en construcci칩n y dise침o. Encuentra las tendencias que est치n transformando el sector."
};

const canonicalUrl = `https://yuntaspublicidad.com/blogs/${articleId}/`;
---

<Layout 
  title={metadata.title}
  description={metadata.description}
  canonical={canonicalUrl}
>
  <!-- Tu contenido existente permanece igual -->
  <section class="relative">
    <img
      src={article.imagenPrincipal}
      alt="Imagen del banner"
      class="w-full max-h-[100vh] object-cover"
    />
    <div class="absolute inset-0 flex flex-col justify-center items-center">
      <h1 class="text-7xl text-center Montserrat font-black text-white sombra-title">
        Blog Yuntero
      </h1>
    </div>
  </section>

  <div class="w-full bg-white text-blue-950 text-3xl font-extrabold text-center h-20 content-center">
    <h2 class="text-5xl">ART칈CULOS</h2>
  </div>

  <section class="p-24 text-white bg-gradient-to-b from-blue-900 to-indigo-950 flex flex-col">
    <div class="flex flex-col items-center">
      <h3 class="text-5xl font-bold text-center mb-[30px]">{article.titulo}</h3>
      <p class="text-center font-bold text-4xl mb-[80px]">
        {article.subTituloBlog}
      </p>

      <BlogFader title={article.titulo} client:load />

      <div class="flex flex-col items-center lg:block lg:columns-2 gap-16 max-w-[1100px]">
        {article.imagenesBlog.map((section:any) => (
          <>
            <img src={section.url} alt="Imagen blog" class="mt-10 mb-28 w-full rounded-xl" />
            <p class="text-justify Montserrat text-2xl py-[40px]">
              {section.parrafo}
            </p>
          </>
        ))}
      </div>

      <p class="text-3xl Montserrat font-semibold mt-[150px]">
        {article.descripcion}
      </p>

      <a href={article.videoBlog} target="_blank">
        <button class="mt-[20px] text-4xl bg-gradient-to-r from-[#2FEBFF] to-[#0EADCA] rounded-[50px] w-[350px] h-[88px] font-black">
          {article.tituloVideoBlog}
        </button>
      </a>
    </div>
  </section>
</Layout>