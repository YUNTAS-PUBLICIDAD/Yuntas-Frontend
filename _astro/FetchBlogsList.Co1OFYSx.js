import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.Be8AcK8B.js";import{b as _,g as z}from"./imageHelpers.2wvKHwk-.js";import{c as R}from"./config.CjXat0bu.js";function E({blog:n}){const[w,i]=l.useState(!1),x=()=>{i(!0)},g=d=>{d.preventDefault(),window.location.href=`/blogs/${n.link}`},m=_(n.imagen_principal),c=n.nombre_producto||"Blog sin título";return e.jsxs("a",{href:`/blogs/${n.link}`,onClick:g,className:"group relative overflow-hidden rounded-2xl bg-white shadow-md transition-all duration-300 hover:scale-105 w-[250px] h-[320px] flex flex-col",children:[e.jsx("div",{className:"relative w-full h-[200px] overflow-hidden flex-shrink-0",children:!w&&m?e.jsx("img",{src:m,alt:n.text_alt_principal||c,title:z(m,c),className:"w-full h-full aspect-square object-cover transition-transform duration-500 group-hover:scale-110",onError:x,loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-10 w-10 text-gray-400 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Imagen no disponible"})]})})}),e.jsxs("div",{className:"px-4 py-1 flex-1 flex flex-col justify-center items-center min-h-[60px] max-h-[90px] text-center",children:[e.jsx("h3",{className:"w-full flex justify-center items-center text-base font-semibold text-gray-800 mb-1 text-center uppercase leading-tight line-clamp-3 max-h-[48px]",children:c}),n.subtitulo&&e.jsx("p",{className:"w-full flex justify-center items-center text-gray-600 text-sm text-center leading-tight line-clamp-3 max-h-[36px]",children:n.subtitulo})]})]})}const V=({blogs:n,onFilteredBlogs:w})=>{const[i,x]=l.useState(""),[g,m]=l.useState([]),[c,d]=l.useState(!1),u=l.useRef(null),y=()=>{const r=new Set;return n.forEach(o=>{const s=o.nombre_producto||"";s.trim()&&r.add(s.trim())}),Array.from(r)},f=r=>{if(r.length===0)return[];const o=y(),s=r.toLowerCase();return o.filter(p=>p.toLowerCase().includes(s)).sort((p,v)=>{const j=p.toLowerCase(),b=v.toLowerCase();return j===s?-1:b===s?1:j.startsWith(s)&&!b.startsWith(s)?-1:b.startsWith(s)&&!j.startsWith(s)?1:j.indexOf(s)-b.indexOf(s)}).slice(0,6)},k=r=>{if(!r.trim())return n;const o=r.toLowerCase();return n.filter(s=>(s.nombre_producto||"").toLowerCase().includes(o))};l.useEffect(()=>{const r=k(i);if(w(r),i.length>0){const o=f(i);m(o),d(o.length>0)}else m([]),d(!1)},[i,n]),l.useEffect(()=>{const r=o=>{u.current&&!u.current.contains(o.target)&&d(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const A=r=>{const o=r.target.value;x(o)},S=r=>{x(r),d(!1)},h=()=>{g.length>0&&i.length>0&&d(!0)},C=()=>{x(""),d(!1)};return e.jsxs("div",{className:"w-full mb-8",ref:u,children:[e.jsx("div",{className:"bg-gray-300 rounded-2xl p-8 w-full flex items-center relative",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",value:i,onChange:A,onFocus:h,placeholder:"Buscar blogs...",className:"w-full bg-white placeholder-black px-6 py-3 rounded-full text-black text-xl focus:outline-none"}),e.jsxs("div",{className:"absolute right-6 top-1/2 transform -translate-y-1/2 flex items-center space-x-2",children:[i&&e.jsx("button",{onClick:C,className:"w-6 h-6 text-gray-500 hover:text-gray-700 transition-colors duration-200",title:"Limpiar búsqueda"}),e.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),c&&g.length>0&&e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute top-2 left-8 right-8 bg-white rounded-xl shadow-xl border border-gray-200 z-50 max-h-60 overflow-y-auto",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"text-xs text-gray-500 px-3 py-2 font-semibold uppercase tracking-wide border-b border-gray-100",children:["Sugerencias de blogs (",g.length,")"]}),g.map((r,o)=>e.jsxs("button",{onClick:()=>S(r),className:"w-full text-left px-3 py-3 hover:bg-gray-100 rounded-lg text-black transition-colors duration-150 flex items-center space-x-3",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),e.jsx("span",{className:"text-sm font-medium",children:r})]},o))]})})})]})};function G(){const[n,w]=l.useState([]),[i,x]=l.useState([]),[g,m]=l.useState(!0),[c,d]=l.useState(0),[u,y]=l.useState(5),[f,k]=l.useState(1),[A,S]=l.useState(0),[h,C]=l.useState(!1);l.useEffect(()=>{const t=()=>{window.innerWidth<1024&&window.innerWidth>=640?y(6):y(5)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),l.useEffect(()=>{(async()=>{m(!0);try{let a=[],P=1,L=!0;for(;L;){const F=new Date().getTime(),W=`${R.apiUrl}${R.endpoints.blogs.list}?page=${P}&perPage=50&_t=${F}`,T=await fetch(W,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!T.ok)throw new Error(`Error al obtener blogs: ${T.status}`);const I=await T.json();if(I.success){const M=I.data?.data||[],$=(Array.isArray(M)?M:[M]).filter(N=>N&&(N.id||N.nombre_producto));if($.length>0){a=[...a,...$];const N=I.data?.last_page||1;P<N?P++:L=!1}else L=!1}else L=!1}console.log("Todos los blogs obtenidos:",a.length),w(a),x(a),S(a.length),k(Math.ceil(a.length/u))}catch(a){console.error("❌ Error al obtener blogs:",a),w([]),x([]),S(0)}finally{m(!1)}})()},[]);const r=t=>{x(t),C(t.length!==n.length||t.length===0&&n.length>0),d(0)},s=(()=>{if(h)return i;{const t=c*u,a=t+u;return i.slice(t,a)}})(),B=()=>!h&&(s.length===u||c<f-1),p=c>0&&!h,v=B()&&c<f-1&&!h,j=()=>{p&&d(c-1)},b=()=>{v&&d(c+1)};return l.useEffect(()=>{h||k(Math.ceil(i.length/u))},[i,h,u]),g?e.jsx("div",{className:"min-h-screen grid place-content-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-b-2 border-cyan-400 mb-4"}),e.jsx("p",{className:"text-white text-2xl font-bold mb-2",children:"Cargando blogs..."})]})}):e.jsxs("div",{className:"min-h-screen py-16",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("h2",{className:"text-white text-3xl md:text-4xl font-bold uppercase tracking-wide",children:"DESCUBRE MÁS SOBRE NUESTROS PRODUCTOS"})}),n.length>0&&e.jsx(V,{blogs:n,onFilteredBlogs:r}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative",children:[e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"transition-transform duration-500 ease-in-out",style:{transform:"translateX(0%)"},children:s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 place-items-center lg:hidden",children:s.map(t=>e.jsx("div",{className:"group transform transition-all duration-300",children:e.jsx("div",{className:"rounded-2xl p-1",children:e.jsx("div",{className:"w-full max-w-[320px] mx-auto bg-gradient-to-br from-white/5 to-white/10 rounded-xl overflow-hidden",children:e.jsx(E,{blog:t})})})},t.id))}),e.jsxs("div",{className:"hidden lg:block space-y-8",children:[e.jsx("div",{className:"grid grid-cols-3 gap-8 justify-items-center",children:s.slice(0,3).map(t=>e.jsx("div",{className:"group transform transition-all duration-300",children:e.jsx("div",{className:"rounded-2xl p-1",children:e.jsx("div",{className:"w-full max-w-[320px] mx-auto bg-gradient-to-br from-white/5 to-white/10 rounded-xl overflow-hidden",children:e.jsx(E,{blog:t})})})},t.id))}),s.length>3&&!h&&e.jsx("div",{className:"flex justify-center mt-12",children:e.jsx("div",{className:"grid grid-cols-2 gap-24 max-w-2xl",children:s.slice(3,5).map(t=>e.jsx("div",{className:"group transform transition-all duration-300",children:e.jsx("div",{className:"rounded-2xl p-1",children:e.jsx("div",{className:"bg-gradient-to-br from-white/5 to-white/10 rounded-xl overflow-hidden max-w-[250px]",children:e.jsx(E,{blog:t})})})},t.id))})}),h&&s.length>3&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mt-12",children:s.slice(3).map(t=>e.jsx("div",{className:"group transform transition-all duration-300 justify-self-center",children:e.jsx("div",{className:"rounded-2xl p-1",children:e.jsx("div",{className:"w-full max-w-[320px] mx-auto bg-gradient-to-br from-white/5 to-white/10 rounded-xl overflow-hidden",children:e.jsx(E,{blog:t})})})},t.id))})]})]}):h?e.jsx("div",{className:"text-white text-center py-16",children:e.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-12 max-w-lg mx-auto",children:[e.jsx("svg",{className:"w-20 h-20 text-gray-400 mx-auto mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"No se encontraron blogs"}),e.jsxs("p",{className:"text-gray-300 text-lg",children:["Intenta con otros términos de búsqueda o"," ",e.jsx("button",{onClick:()=>{x(n),C(!1)},className:"text-cyan-400 hover:text-cyan-300 underline font-semibold transition-colors",children:"ver todos los blogs"})]})]})}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-white/70 text-xl",children:"No hay blogs disponibles"})})})}),(f>1||B())&&!h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center items-center mt-16 space-x-8",children:[e.jsx("button",{"aria-label":"Página anterior",title:"Página anterior",onClick:j,disabled:!p,className:`flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300 ${p?"border-white/50 text-white hover:bg-white/10 hover:border-white cursor-pointer":"border-white/20 text-white/30 cursor-not-allowed"}`,children:e.jsx("span",{className:"text-2xl font-bold",children:"<"})}),e.jsx("div",{className:"flex items-center justify-center sm:space-x-3 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white px-6 sm:px-8 py-2 sm:py-4 rounded-full text-sm sm:text-base",children:e.jsx("span",{className:"uppercase tracking-wide font-semibold text-center",children:"ver más"})}),e.jsx("button",{"aria-label":"Página siguiente",title:"Página siguiente",onClick:b,disabled:!v,className:`flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300 ${v?"border-white/50 text-white hover:bg-white/10 hover:border-white cursor-pointer":"border-white/20 text-white/30 cursor-not-allowed"}`,children:e.jsx("span",{className:"text-2xl font-bold",children:">"})})]}),f>1&&e.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:Array.from({length:f},(t,a)=>e.jsx("button",{"aria-label":`Ir a la página ${a+1}`,title:`Ir a la página ${a+1}`,onClick:()=>d(a),className:`w-3 h-3 rounded-full transition-all duration-300 ${a===c?"bg-white":"bg-white/30 hover:bg-white/50"}`},a))})]})]})]})}export{G as default};
