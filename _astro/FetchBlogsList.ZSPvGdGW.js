import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.Be8AcK8B.js";import{b as R,g as z}from"./imageHelpers.2wvKHwk-.js";import{c as A}from"./config.DirQqIDd.js";function L({blog:r}){const[j,i]=l.useState(!1),g=()=>{i(!0)},f=d=>{d.preventDefault(),window.location.href=`/blogs/${r.link}`},m=R(r.imagen_principal),c=r.subtitulo||"Blog sin título";return e.jsxs("a",{href:`/blogs/${r.link}`,onClick:f,className:`group relative overflow-hidden rounded-2xl bg-white 
      shadow-md transition-all duration-300 hover:scale-105 
      w-full flex flex-col  `,children:[e.jsx("div",{className:"relative w-full h-[315px] overflow-hidden flex-shrink-0 ",children:!j&&m?e.jsx("img",{src:m,alt:r.text_alt_principal||c,title:z(m,c),className:"w-full h-full aspect-square object-cover transition-transform duration-500 group-hover:scale-110",onError:g,loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-10 w-10 text-gray-400 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Imagen no disponible"})]})})}),e.jsxs("div",{className:"px-2 py-2 flex-1 flex flex-col justify-center items-center min-h-[75px] max-h-[250px] text-center ",children:[e.jsx("h3",{className:"w-full flex justify-left px-2 items-left text-base font-semibold text-gray-800 mb-1 text-left uppercase leading-tight line-clamp-3 max-h-[100px] ",children:c}),r.nombre_producto&&e.jsx("p",{className:"w-full flex justify-left px-2 items-center text-gray-600 text-sm text-center leading-tight line-clamp-3 max-h-[36px]",children:r.nombre_producto})]})]})}const V=({blogs:r,onFilteredBlogs:j})=>{const[i,g]=l.useState(""),[f,m]=l.useState([]),[c,d]=l.useState(!1),u=l.useRef(null),k=()=>{const n=new Set;return r.forEach(a=>{const o=a.nombre_producto||"";o.trim()&&n.add(o.trim())}),Array.from(n)},p=n=>{if(n.length===0)return[];const a=k(),o=n.toLowerCase();return a.filter(v=>v.toLowerCase().includes(o)).sort((v,N)=>{const w=v.toLowerCase(),b=N.toLowerCase();return w===o?-1:b===o?1:w.startsWith(o)&&!b.startsWith(o)?-1:b.startsWith(o)&&!w.startsWith(o)?1:w.indexOf(o)-b.indexOf(o)}).slice(0,6)},S=n=>{if(!n.trim())return r;const a=n.toLowerCase();return r.filter(o=>(o.nombre_producto||"").toLowerCase().includes(a))};l.useEffect(()=>{const n=S(i);if(j(n),i.length>0){const a=p(i);m(a),d(a.length>0)}else m([]),d(!1)},[i,r]),l.useEffect(()=>{const n=a=>{u.current&&!u.current.contains(a.target)&&d(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const M=n=>{const a=n.target.value;g(a)},C=n=>{g(n),d(!1)},h=()=>{f.length>0&&i.length>0&&d(!0)};return e.jsxs("div",{className:"w-full mb-8 ",ref:u,children:[e.jsx("div",{className:" w-full flex items-center relative",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",value:i,onChange:M,onFocus:h,placeholder:"Buscar artículos...",className:`
            w-full bg-gray-100                 
            placeholder-gray-500            
            pl-6 pr-16 py-3          
            rounded-full                   
            text-black text-lg              
            focus:outline-none focus:ring-2 
            focus:ring-blue-300 
            `}),e.jsx("div",{className:"absolute  right-0 top-1/2 transform -translate-y-1/2 flex items-center space-x-2",children:i&&e.jsx("button",{type:"button",className:`
                  absolute right-1 top-1/2 
                  transform -translate-y-1/2 
                  w-12 h-12  
                  bg-[#003d56]  
                  hover:bg-[#041119]  
                  text-white  
                  rounded-full  
                  flex items-center justify-center 
                  focus:outline-none focus:ring-2 
                  focus:ring-blue-400 focus:ring-offset-1
                `,"aria-label":"Buscar",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})})]})}),c&&f.length>0&&e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute top-2 left-8 right-8 bg-white rounded-xl shadow-xl border border-gray-200 z-50 max-h-60 overflow-y-auto",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"text-xs text-gray-500 px-3 py-2 font-semibold uppercase tracking-wide border-b border-gray-100",children:["Sugerencias de blogs (",f.length,")"]}),f.map((n,a)=>e.jsxs("button",{onClick:()=>C(n),className:"w-full text-left px-3 py-3 hover:bg-gray-100 rounded-lg text-black transition-colors duration-150 flex items-center space-x-3",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),e.jsx("span",{className:"text-sm font-medium",children:n})]},a))]})})})]})};function q(){const[r,j]=l.useState([]),[i,g]=l.useState([]),[f,m]=l.useState(!0),[c,d]=l.useState(0),[u,k]=l.useState(6),[p,S]=l.useState(1),[M,C]=l.useState(0),[h,n]=l.useState(!1);l.useEffect(()=>{const t=()=>{window.innerWidth<1024&&window.innerWidth>=640,k(6)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),l.useEffect(()=>{(async()=>{m(!0);try{let s=[],E=1,B=!0;for(;B;){const W=new Date().getTime(),_=`${A.apiUrl}${A.endpoints.blogs.list}?page=${E}&perPage=50&_t=${W}`,I=await fetch(_,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!I.ok)throw new Error(`Error al obtener blogs: ${I.status}`);const P=await I.json();if(P.success){const T=P.data?.data||[],$=(Array.isArray(T)?T:[T]).filter(y=>y&&(y.id||y.nombre_producto));if($.length>0){s=[...s,...$];const y=P.data?.last_page||1;E<y?E++:B=!1}else B=!1}else B=!1}console.log("Todos los blogs obtenidos:",s.length),j(s),g(s),C(s.length),S(Math.ceil(s.length/u))}catch(s){console.error("❌ Error al obtener blogs:",s),j([]),g([]),C(0)}finally{m(!1)}})()},[]);const a=t=>{g(t),n(t.length!==r.length||t.length===0&&r.length>0),d(0)},x=(()=>{if(h)return i;{const t=c*u,s=t+u;return i.slice(t,s)}})(),v=()=>!h&&(x.length===u||c<p-1),N=c>0&&!h,w=v()&&c<p-1&&!h,b=()=>{N&&d(c-1)},F=()=>{w&&d(c+1)};return l.useEffect(()=>{h||S(Math.ceil(i.length/u))},[i,h,u]),f?e.jsx("div",{className:"min-h-screen grid place-content-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-b-2 border-cyan-400 mb-4"}),e.jsx("p",{className:"text-white text-2xl font-bold mb-2",children:"Cargando blogs..."})]})}):e.jsxs("div",{className:"min-h-screen py-16 bg-white",children:[e.jsxs("div",{className:`w-full bg-[#2DCCFF]
       text-white px-6 md:px-20 py-8 flex 
       items-center justify-center gap-8 mb-12 shadow-md`,children:[e.jsx("h2",{className:"text-white text-5xl md:text-5xl font-bold uppercase tracking-wide leading-tight",children:"DESCUBRE MÁS SOBRE NUESTROS PRODUCTOS"}),r.length>0&&e.jsxs("div",{className:"w-full max-w-4/12",children:[" ",e.jsx(V,{blogs:r,onFilteredBlogs:a})]})]}),e.jsxs("div",{className:"w-full mx-auto px-6 relative ",children:[e.jsx("div",{className:"overflow-hidden ",children:e.jsx("div",{className:"w-full transition-transform duration-500 ease-in-out  ",style:{transform:"translateX(0%)"},children:x.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 place-items-center lg:hidden ",children:x.map(t=>e.jsx("div",{className:"group transform transition-all duration-300 shadow-lg ",children:e.jsx("div",{className:"rounded-2xl p-1",children:e.jsx("div",{className:"w-full max-w-[320px] mx-auto bg-gradient-to-br from-white/5 to-white/10 rounded-xl overflow-hidden",children:e.jsx(L,{blog:t})})})},t.id))}),e.jsxs("div",{className:"hidden lg:block space-y-8",children:[e.jsx("div",{className:"grid grid-cols-3 gap-8 ",children:x.slice(0,3).map(t=>e.jsx("div",{children:e.jsx(L,{blog:t})},t.id))}),x.length>3&&!h&&e.jsx("div",{className:"hidden lg:block space-y-8 py-4  ",children:e.jsx("div",{className:"grid grid-cols-3 gap-8 ",children:x.slice(3,6).map(t=>e.jsx("div",{children:e.jsx(L,{blog:t})},t.id))})}),h&&x.length>3&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mt-12",children:x.slice(3).map(t=>e.jsx("div",{children:e.jsx(L,{blog:t})},t.id))})]})]}):h?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-white rounded-2xl p-12 max-w-lg mx-auto",children:[e.jsx("svg",{className:"w-20 h-20 text-gray-400 mx-auto mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"No se encontraron blogs"}),e.jsxs("p",{className:"text-gray-300 text-lg",children:["Intenta con otros términos de búsqueda o"," ",e.jsx("button",{onClick:()=>{g(r),n(!1)},className:"text-cyan-400 hover:text-cyan-300 underline font-semibold transition-colors",children:"ver todos los blogs"})]})]})}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-blue/70 text-xl",children:"No hay blogs disponibles"})})})}),(p>1||v())&&!h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center items-center mt-10 space-x-2 sm:space-x-4",children:[e.jsx("button",{"aria-label":"Página anterior",title:"Página anterior",onClick:b,disabled:!N,className:`px-2 py-1 transition-colors duration-200 cursor-pointer ${N?"text-blue-900 hover:text-blue-700":"text-gray-400 cursor-not-allowed"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),e.jsx("div",{className:"flex items-center space-x-1 sm:space-x-2",children:Array.from({length:p},(t,s)=>e.jsx("button",{"aria-label":`Ir a la página ${s+1}`,title:`Ir a la página ${s+1}`,onClick:()=>d(s),className:`
                        w-8 h-8 sm:w-10 sm:h-10   {/* Size */}
                        rounded-full             {/* Shape */}
                        flex items-center justify-center 
                        text-[20px] font-semibold 
                        transition-colors duration-200 cursor-pointer
                        ${s===c?"bg-blue-900 text-white":"bg-transparent text-blue-900 hover:bg-blue-100"}
                      `,children:s+1},s))}),e.jsx("button",{"aria-label":"Página siguiente",title:"Página siguiente",onClick:F,disabled:!w,className:`px-2 py-1 transition-colors duration-200 cursor-pointer  ${w?"text-blue-900 hover:text-blue-700":"text-gray-400 cursor-not-allowed"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]}),p>1&&e.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:Array.from({length:p},(t,s)=>e.jsx("button",{"aria-label":`Ir a la página ${s+1}`,title:`Ir a la página ${s+1}`,onClick:()=>d(s),className:`w-3 h-3 rounded-full transition-all duration-300  ${s===c?"bg-white":"bg-white/30 hover:bg-white/50"}`},s))})]})]})]})}export{q as default};
