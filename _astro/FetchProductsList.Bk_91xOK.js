import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as c}from"./index.Be8AcK8B.js";import{b as E,g as F}from"./imageHelpers.2wvKHwk-.js";import{c as $}from"./config.CjXat0bu.js";const I=({producto:n})=>{console.log("üé¥ ProductCard recibi√≥ producto:",n);const u=E(n.imagen_principal),i=n.text_alt_principal||"Imagen del producto",d=n.title||n.titulo||n.nombre||"Producto sin t√≠tulo",o=n.link;console.log("üñºÔ∏è Imagen URL calculada:",u),console.log("üìù T√≠tulo calculado:",d),console.log("üîó Link del producto:",o);const x=g=>{g.preventDefault(),window.location.href=`/products/${o}`};return e.jsxs("a",{href:`/products/${o}`,onClick:x,className:"relative flex flex-col items-center hover:scale-105 transition-all duration-200 cursor-pointer group mb-8",title:d,children:[e.jsx("div",{className:"relative w-[280px] bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl overflow-hidden border border-gray-700",children:e.jsx("div",{className:"h-[200px] w-[280px] overflow-hidden",children:u?e.jsx("img",{className:"w-full h-full object-cover object-center",src:u,alt:i,title:F(u,d),loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center",children:e.jsx("p",{className:"text-white text-xl font-bold",children:"Sin imagen"})})})}),e.jsx("div",{className:"p-4 mt-2",children:e.jsx("p",{className:"text-white text-center text-sm font-semibold leading-tight",children:d})})]})},M=({products:n,onFilteredProducts:u})=>{const[i,d]=c.useState(""),[o,x]=c.useState([]),[g,m]=c.useState(!1),v=c.useRef(null),y=()=>{const s=new Set;return n.forEach(a=>{const l=a.title||a.titulo||a.nombre||"";l.trim()&&s.add(l.trim())}),Array.from(s)},b=s=>{if(s.length===0)return[];const a=y(),l=s.toLowerCase();return a.filter(p=>p.toLowerCase().includes(l)).sort((p,N)=>{const r=p.toLowerCase(),t=N.toLowerCase();return r===l?-1:t===l?1:r.startsWith(l)&&!t.startsWith(l)?-1:t.startsWith(l)&&!r.startsWith(l)?1:r.indexOf(l)-t.indexOf(l)}).slice(0,6)},k=s=>{if(!s.trim())return n;const a=s.toLowerCase();return n.filter(l=>(l.title||l.titulo||l.nombre||"").toLowerCase().includes(a))};c.useEffect(()=>{const s=k(i);if(u(s),i.length>0){const a=b(i);x(a),m(a.length>0)}else x([]),m(!1)},[i,n]),c.useEffect(()=>{const s=a=>{v.current&&!v.current.contains(a.target)&&m(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const j=s=>{const a=s.target.value;d(a)},C=s=>{d(s),m(!1)},S=()=>{o.length>0&&i.length>0&&m(!0)},P=()=>{d(""),m(!1)};return e.jsxs("div",{className:"w-full mb-8",ref:v,children:[e.jsx("div",{className:"relative w-full mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:i,onChange:j,onFocus:S,placeholder:"Buscar productos...",className:"w-full bg-gradient-to-r from-gray-800 to-gray-900 border-2 border-gray-700 placeholder-gray-400 px-6 py-4 pr-16 rounded-2xl text-white text-xl focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/20 transition-all duration-300 shadow-xl"}),e.jsxs("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 flex items-center space-x-2",children:[i&&e.jsx("button",{onClick:P,className:"w-6 h-6 text-gray-400 hover:text-white transition-colors duration-200 hover:scale-110",title:"Limpiar b√∫squeda",children:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),g&&o.length>0&&e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-br from-gray-800 to-gray-900 border-2 border-gray-700 rounded-2xl shadow-2xl z-50 max-h-64 overflow-y-auto backdrop-blur-sm",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"text-xs text-cyan-400 px-4 py-2 font-bold uppercase tracking-wider border-b border-gray-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("span",{children:["Sugerencias (",o.length,")"]})]}),o.map((s,a)=>e.jsxs("button",{onClick:()=>C(s),className:"w-full text-left px-4 py-3 hover:bg-gray-700/50 rounded-xl text-white transition-all duration-200 flex items-center space-x-3 group hover:scale-[1.02] hover:border-l-2 hover:border-cyan-400",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400 group-hover:text-cyan-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{className:"text-sm font-medium group-hover:text-cyan-100 transition-colors",children:s})]},a))]})})})]})};function z(){const[n,u]=c.useState([]),[i,d]=c.useState([]),[o,x]=c.useState(1),[g,m]=c.useState(1),[v,y]=c.useState(!0),[b,k]=c.useState(!1),j=6;c.useEffect(()=>{(async()=>{y(!0);try{let t=[],h=1,f=!0;for(;f;){const A=`${$.apiUrl}${$.endpoints.productos.list}?page=${h}&per_page=50`,w=await(await fetch(A,{headers:{"Content-Type":"application/json",Accept:"application/json"}})).json();w&&Array.isArray(w.data)&&w.data.length>0?(t=[...t,...w.data],w.current_page<w.last_page?h++:f=!1):f=!1}console.log("Todos los productos obtenidos:",t.length),u(t),d(t),m(Math.ceil(t.length/j))}catch(t){console.error("Error fetching products:",t),u([]),d([])}finally{y(!1)}})()},[]);const C=r=>{d(r),k(r.length!==n.length||r.length===0&&n.length>0),x(1)},P=(()=>{if(b)return i;{const r=(o-1)*j,t=r+j;return i.slice(r,t)}})(),a=(r=>{const t=[];for(let h=0;h<r.length;h+=3)t.push(r.slice(h,h+3));return t})(P),l=()=>{o>1&&x(o-1)},L=()=>{o<g&&x(o+1)},p=o>1,N=o<g;return c.useEffect(()=>{b||m(Math.ceil(i.length/j))},[i,b]),v?e.jsx("div",{className:"grid place-content-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-b-2 border-cyan-400 mb-4"}),e.jsx("p",{className:"text-white text-2xl font-bold animate-pulse",children:"Cargando productos..."})]})}):e.jsx("div",{className:"w-full",children:n.length>0?e.jsxs(e.Fragment,{children:[e.jsx(M,{products:n,onFilteredProducts:C}),P.length>0?e.jsx("div",{className:"space-y-8 mb-12",children:a.map((r,t)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 px-4 mb-4",children:[r.map((h,f)=>e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{producto:h})},`${t}-${f}-${h.id||h.title||f}`)),r.length<3&&Array.from({length:3-r.length}).map((h,f)=>e.jsx("div",{className:"invisible",children:e.jsx("div",{className:"w-[280px] h-[200px]"})},`empty-${t}-${f}`))]}),e.jsx("div",{className:"w-full h-[2px] bg-gradient-to-r from-transparent via-cyan-400 to-transparent"})]},t))}):e.jsx("div",{className:"text-white text-center py-16",children:e.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-12 max-w-lg mx-auto",children:[e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"No se encontraron productos"}),e.jsxs("p",{className:"text-gray-300 text-lg",children:["Intenta con otros t√©rminos de b√∫squeda o"," ",e.jsx("button",{onClick:()=>{d(n),k(!1)},className:"text-cyan-400 hover:text-cyan-300 underline font-semibold transition-colors",children:"ver todos los productos"})]})]})}),g>1&&!b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center items-center mt-16 space-x-8",children:[e.jsx("button",{onClick:l,disabled:!p,className:`w-12 h-12 rounded-full border-2 transition-all duration-300 ${p?"border-white/50 text-white hover:bg-white/10 hover:border-white cursor-pointer":"border-white/20 text-white/30 cursor-not-allowed"}`,title:p?"P√°gina anterior":"No hay p√°gina anterior",children:e.jsx("span",{className:"text-2xl font-bold",children:"<"})}),e.jsx("div",{className:"flex items-center justify-center sm:space-x-3 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white px-6 sm:px-8 py-2 sm:py-4 rounded-full text-sm sm:text-base",children:e.jsxs("span",{className:"uppercase tracking-wide font-semibold text-center",children:["P√°gina ",o," de ",g]})}),e.jsx("button",{onClick:L,disabled:!N,className:`w-12 h-12 rounded-full border-2 transition-all duration-300 ${N?"border-white/50 text-white hover:bg-white/10 hover:border-white cursor-pointer":"border-white/20 text-white/30 cursor-not-allowed"}`,title:N?"P√°gina siguiente":"No hay p√°gina siguiente",children:e.jsx("span",{className:"text-2xl font-bold",children:">"})})]}),e.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:Array.from({length:g},(r,t)=>e.jsx("button",{onClick:()=>x(t+1),className:`w-3 h-3 rounded-full transition-all duration-300 ${t+1===o?"bg-white":"bg-white/30 hover:bg-white/50"}`,title:`Ir a p√°gina ${t+1}`},t))})]})]}):e.jsx("div",{className:"text-white text-center py-16",children:e.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-12 max-w-lg mx-auto",children:[e.jsx("svg",{className:"w-20 h-20 text-gray-400 mx-auto mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"No hay productos disponibles"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Intenta recargar la p√°gina o contacta al administrador"})]})})})}export{z as default};
