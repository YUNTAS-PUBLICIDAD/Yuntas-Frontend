import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{i as U,l as H,c as Q,d as Y,m as Z}from"./index.CvDk6RGp.js";import{r as f}from"./index.Be8AcK8B.js";import{S as P}from"./sweetalert2.esm.all.Bj_ZQUAw.js";import{g as $,c as _}from"./config.DZH0lvwJ.js";import{T as ee}from"./TableContainer.C49vMdQY.js";import{h as O}from"./httpService.Vy0tO7RS.js";import{u as re}from"./useDarkMode.C4HGFL6C.js";import"./iconBase.Db4UJpFa.js";const z=({children:i,isOpen:d,onClose:s,title:m})=>d?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 overflow-y-auto",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 px-5 py-6 rounded-xl max-w-4xl w-full mx-4 my-10 shadow-lg",children:[m&&e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-white",children:m}),e.jsx("button",{onClick:s,className:"absolute top-4 right-5 text-gray-500 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white text-xl","aria-label":"Cerrar",children:"✕"}),e.jsx("div",{className:"overflow-y-auto max-h-[75vh] pr-2",children:i})]})}):null,B=i=>{const d=i.target.files?.[0];d&&d.size>2*1024*1024&&(P.fire({icon:"warning",title:"¡Imagen muy grande!",text:"Máx. 2 MB."}),i.target.value="")},te=({initialData:i,onSubmit:d,isEditing:s})=>{f.useEffect(()=>{if(i){console.log("Inicializando especificaciones y beneficios desde specs:",i.especificaciones);const l=i.especificaciones?Object.entries(i.especificaciones).filter(([c])=>c.startsWith("spec_")).map(([,c])=>String(c).trim()):[];S(l.length>0?l:[""]);const n=i.especificaciones?Object.entries(i.especificaciones).filter(([c])=>c.startsWith("beneficio_")).map(([,c])=>String(c).trim()):[];k(n.length>0?n:[""])}},[i]);const[m,E]=f.useState(i?.imagenes||[]),[b,C]=f.useState([]),[j,S]=f.useState((()=>{if(!i?.especificaciones)return[""];const l=Object.entries(i.especificaciones).filter(([n])=>n.startsWith("spec_")).map(([,n])=>String(n));return l.length>0?l:[""]})()),[x,k]=f.useState((()=>{if(!i?.especificaciones)return[""];const l=Object.entries(i.especificaciones).filter(([n])=>n.startsWith("beneficio_")).map(([,n])=>String(n));return l.length>0?l:[""]})()),[h,N]=f.useState(i?.etiqueta?.keywords||[""]),w=(l,n)=>{const c=[...h];c[l]=n,N(c)},v=()=>{h[h.length-1].trim()&&N([...h,""])},T=l=>{h.length>1&&N(h.filter((n,c)=>c!==l))},A=l=>{E(m.filter(n=>n.id!==l)),C([...b,l])},o=(l,n)=>{const c=[...j];c[l]=n,S(c)},t=()=>{j[j.length-1].trim()&&S([...j,""])},r=l=>{j.length>1&&S(j.filter((n,c)=>c!==l))},a=(l,n)=>{const c=[...x];c[l]=n,k(c)},p=()=>{x[x.length-1].trim()&&k([...x,""])},y=l=>{x.length>1&&k(x.filter((n,c)=>c!==l))},u=async l=>{l.preventDefault();const n=new FormData(l.currentTarget),c=new FormData;c.append("nombre",n.get("nombre")),c.append("link",n.get("link")),c.append("titulo",n.get("titulo_hero")),c.append("stock",n.get("stock"));const G=n.get("precio").replace("$","").trim();c.append("precio",G),c.append("subtitulo",n.get("nombre")),c.append("descripcion",n.get("descripcion_informacion")),c.append("seccion",n.get("seccion"));const L=n.get("imagen_lista_productos");L&&L.size>0&&c.append("imagen_principal",L);const q={};j.forEach((g,I)=>{g.trim()&&(q[`spec_${I+1}`]=g.trim())}),x.forEach((g,I)=>{g.trim()&&(q[`beneficio_${I+1}`]=g.trim())}),Object.keys(q).length>0&&Object.entries(q).forEach(([g,I])=>{c.append(`especificaciones[${g}]`,I)});const K=[{key:"imagen_hero",file:n.get("imagen_hero"),index:0},{key:"imagen_especificaciones",file:n.get("imagen_especificaciones"),index:1},{key:"imagen_beneficios",file:n.get("imagen_beneficios"),index:2},{key:"imagen_popups",file:n.get("imagen_popups"),index:3}];console.log("=== DEBUGGING IMÁGENES FRONTEND ===");let D=0;K.forEach(g=>{console.log(`Revisando imagen ${g.index} (${g.key}):`,{hasFile:g.file instanceof File,fileName:g.file?.name||"N/A",fileSize:g.file?.size||0,fileType:g.file?.type||"N/A"}),g.file&&g.file instanceof File&&g.file.size>0?(console.log(`✅ Agregando imagen ${g.index}:`,g.key,g.file.name,`(${g.file.size} bytes)`),c.append(`imagenes[${g.index}]`,g.file),c.append(`imagen_tipos[${g.index}]`,g.key),D++):console.log(`❌ Imagen ${g.index} (${g.key}) no tiene archivo válido o está vacía`);const I=n.get("meta_título"),X=n.get("meta_descripcion");c.append("etiqueta[meta_titulo]",I.trim()),c.append("etiqueta[meta_descripcion]",X.trim());const V=h.filter(M=>M.trim()!=="");V.length>0&&V.forEach((M,J)=>{c.append(`etiqueta[keywords][${J}]`,M.trim())})}),console.log(`Total de imágenes enviadas: ${D}`),b.length>0&&b.forEach((g,I)=>{c.append(`imagenes_eliminar[${I}]`,g)});const R=n.get("meta_título"),W=n.get("meta_descripcion");(R.trim()||W.trim())&&(c.append("etiqueta[meta_titulo]",R.trim()),c.append("etiqueta[meta_descripcion]",W.trim())),console.log("=== DATOS ENVIADOS AL BACKEND ==="),c.forEach((g,I)=>{g instanceof File?console.log(`Campo: ${I}, Archivo: ${g.name} (${g.size} bytes)`):console.log(`Campo: ${I}, Valor: ${g}`)}),s&&c.append("_method","PUT"),await d(c)};return e.jsxs("form",{id:"product-form",onSubmit:u,className:"space-y-8 max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4 flex items-center",children:"Datos para Dashboard (Gestión Interna)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nombre del Producto"," ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(Aparece en tabla)"})]}),e.jsx("input",{name:"nombre",defaultValue:i?.nombre||i?.titulo,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Máx. 255 caracteres (letras, números y espacios)."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Sección/Categoría"," ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(Aparece en tabla)"})]}),e.jsx("input",{name:"seccion",defaultValue:i?.seccion,placeholder:"ej: Letreros LED, Sillas LED, Pisos LED, etc.",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Máx. 255 caracteres (letras, números y espacios)."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Precio"," ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(Aparece en tabla)"})]}),e.jsx("input",{name:"precio",defaultValue:i?.precio?`$${i.precio}`:i?.precio,placeholder:"ej: $500.00",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Coloca el precio en números (máx. 100 000)."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Link/URL"," ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(ej: letreros-neon-led)"})]}),e.jsx("input",{name:"link",defaultValue:i?.link||(i?.titulo?i.titulo.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]/g,""):""),placeholder:"letreros-neon-led",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Solo minúsculas y guiones. Hasta 255 letras, números o espacios."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Meta Título ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(SEO)"})]}),e.jsx("input",{name:"meta_título",defaultValue:i?.etiqueta?.meta_titulo||"",placeholder:"Título para SEO del producto",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Máx. 70 caracteres (letras, números y espacios)."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Meta Descripción"," ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(SEO)"})]}),e.jsx("textarea",{name:"meta_descripcion",defaultValue:i?.etiqueta?.meta_descripcion||"",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Descripción breve del producto para SEO..."}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Máx. 160 caracteres (letras, números y espacios)."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Keywords ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(SEO)"})]}),e.jsx("div",{className:"space-y-2",children:h.map((l,n)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:c=>w(n,c.target.value),placeholder:"ej: letreros para negocio",className:"flex-1 mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),h.length>1&&e.jsx("button",{type:"button",onClick:()=>T(n),className:"text-red-500 hover:text-red-700 font-bold text-lg",children:"✕"})]},n))}),e.jsx("button",{type:"button",onClick:v,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium cursor-pointer",children:"+ Agregar keyword"}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Palabras clave relevantes para que los buscadores encuentren el producto."})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-4 flex items-center",children:"Datos para Página de Producto (Frontend)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Título Hero"," ",e.jsx("span",{className:"text-green-600 text-sm",children:"(Aparece sobre la imagen principal)"})]}),e.jsx("input",{name:"titulo_hero",defaultValue:i?.titulo,placeholder:"ej: Letreros Neón LED",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Máx. 255 caracteres (letras, números y espacios)."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Descripción"," ",e.jsx("span",{className:"text-green-600 text-sm",children:'(Sección "Información")'})]}),e.jsx("textarea",{rows:4,name:"descripcion_informacion",defaultValue:i?.descripcion,placeholder:"Describe el producto, sus usos y características principales...",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Descripción detallada. 300-600 palabras."})]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg border border-purple-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-4 flex items-center",children:"Especificaciones (Checkmarks en el producto)"}),e.jsxs("div",{className:"space-y-3",children:[j.map((l,n)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"text",value:l,onChange:c=>o(n,c.target.value),placeholder:"ej: Materiales duraderos",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-purple-500 focus:border-purple-500"}),j.length>1&&e.jsx("button",{type:"button",onClick:()=>r(n),className:"text-red-500 hover:text-red-700 px-2 py-1",children:"✕"})]},n)),e.jsx("button",{type:"button",onClick:t,className:"text-purple-600 hover:text-purple-800 text-sm font-medium",children:"+ Agregar especificación"})]})]}),e.jsxs("div",{className:"bg-orange-50 p-6 rounded-lg border border-orange-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-800 mb-4 flex items-center",children:"Beneficios (Lista en el producto)"}),e.jsxs("div",{className:"space-y-3",children:[x.map((l,n)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"text",value:l,onChange:c=>a(n,c.target.value),placeholder:"ej: Iluminación con colores vibrantes",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-orange-500 focus:border-orange-500"}),x.length>1&&e.jsx("button",{type:"button",onClick:()=>y(n),className:"text-red-500 hover:text-red-700 px-2 py-1",children:"✕"})]},n)),e.jsx("button",{type:"button",onClick:p,className:"text-orange-600 hover:text-orange-800 text-sm font-medium",children:"+ Agregar beneficio"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:"Imágenes del Producto (4 imágenes específicas requeridas)"}),m.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Imágenes actuales"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:m.map(l=>e.jsxs("div",{className:"flex flex-col items-center p-4 bg-white rounded-lg shadow-sm border hover:shadow-md transition",children:[e.jsx("img",{src:`${l.url_imagen}`,alt:l.texto_alt_SEO,className:"w-32 h-32 object-cover rounded-lg mb-2"}),e.jsx("span",{className:"text-center text-gray-700 text-sm mb-2",children:l.texto_alt_SEO}),e.jsx("button",{type:"button",onClick:()=>A(l.id),className:"bg-red-100 text-red-600 text-xs px-3 py-1 rounded-full hover:bg-red-200 transition",children:"Eliminar"})]},l.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"text-md font-semibold text-blue-700 mb-3",children:["Imagen para Lista de Productos"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:['Esta imagen aparece en la página "Nuestros Productos" y es'," ",e.jsx("strong",{children:"obligatoria"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",name:"imagen_lista_productos",required:!s,className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:B}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Cada imagen debe pesar menos de 2 MB."}),e.jsx("input",{type:"text",name:"alt_imagen_lista",value:i?.text_alt_principal||"",placeholder:"Texto ALT para SEO",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:[e.jsxs("h4",{className:"text-md font-semibold text-green-700 mb-3",children:["🎯 Imagen Hero del Producto"," ",e.jsx("span",{className:"text-sm text-gray-500",children:"(Banner Principal)"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Imagen de fondo grande en la página individual del producto -"," ",e.jsx("strong",{children:"Banner superior principal"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",name:"imagen_hero",className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100",onChange:B}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Cada imagen debe pesar menos de 2 MB."}),e.jsx("input",{type:"text",name:"alt_imagen_hero",value:i?.imagenes[0]?.texto_alt_SEO||"",placeholder:"Texto ALT para SEO",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-purple-200",children:[e.jsxs("h4",{className:"text-md font-semibold text-purple-700 mb-3",children:["📋 Imagen para Especificaciones"," ",e.jsx("span",{className:"text-sm text-gray-500",children:"(Sección Izquierda)"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Imagen que acompaña la sección de especificaciones -"," ",e.jsx("strong",{children:"Lado izquierdo de la página"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",name:"imagen_especificaciones",className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100",onChange:B}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Cada imagen debe pesar menos de 2 MB."}),e.jsx("input",{type:"text",name:"alt_imagen_especificaciones",value:i?.imagenes[1]?.texto_alt_SEO||"",placeholder:"Texto ALT para SEO",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-orange-200",children:[e.jsxs("h4",{className:"text-md font-semibold text-orange-700 mb-3",children:["🎁 Imagen para Beneficios"," ",e.jsx("span",{className:"text-sm text-gray-500",children:"(Sección Derecha)"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Imagen que acompaña la sección de beneficios -"," ",e.jsx("strong",{children:"Lado derecho de la página"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",name:"imagen_beneficios",className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100",onChange:B}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Cada imagen debe pesar menos de 2 MB."}),e.jsx("input",{type:"text",name:"alt_imagen_beneficios",value:i?.imagenes[2]?.texto_alt_SEO||"",placeholder:"Texto ALT para SEO",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"text-md font-semibold text-yellow-700 mb-3",children:"💬 Imagen para Popups"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Imagen que acompaña los popups de registro clientes"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",name:"imagen_popups",className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-yellow-50 file:text-yellow-700 hover:file:bg-yellow-100",onChange:B}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Cada imagen debe pesar menos de 2 MB."}),e.jsx("input",{type:"text",name:"alt_imagen_popups",value:i?.imagenes[3]?.texto_alt_SEO||"",placeholder:"Texto ALT para SEO",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-yellow-500 focus:border-yellow-500"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"💡 Estructura CORRECTA de imágenes:"}),e.jsx("br",{}),"📸 ",e.jsx("strong",{children:"Lista Productos:"})," Imagen para vista de catálogo (imagen_principal)",e.jsx("br",{}),"🎯 ",e.jsx("strong",{children:"Hero:"})," Banner principal superior (images[0])",e.jsx("br",{}),"📋 ",e.jsx("strong",{children:"Especificaciones:"})," Acompaña características (images[1])",e.jsx("br",{}),"🎁 ",e.jsx("strong",{children:"Beneficios:"})," Acompaña ventajas (images[2])",e.jsx("br",{}),"💬 ",e.jsx("strong",{children:"Popups:"})," Acompaña popups registro (images[3])"]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",className:"px-6 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:[s?"Actualizar":"Crear"," Producto"]})]})]})};function ae({onSubmit:i,plantillaId:d=null}){const[s,m]=f.useState(null),[E,b]=f.useState([]),[C,j]=f.useState(!1),[S,x]=f.useState([]),k=E.find(o=>o.id===s),h=Array.from({length:3},()=>({imagenPrincipal:null,vistaPreviaPrincipal:"",imagenSecundaria1:null,vistaPreviaSecundaria1:"",imagenSecundaria2:null,vistaPreviaSecundaria2:"",titulo:"",parrafo1:""}));f.useEffect(()=>{x(h)},[]),f.useEffect(()=>{if(s===null){x(h);return}(async()=>{try{j(!0);const t=localStorage.getItem("token"),r=await fetch($(_.endpoints.emailProducto.plantillaPorProducto(s)),{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});if(r.status===404){alert("ℹ️ El producto seleccionado no tiene una plantilla asociada."),x(h);return}if(!r.ok)throw new Error("Error al obtener plantilla");const a=await r.json();if(!a?.secciones||a.secciones.length===0){alert("ℹ️ Este producto no tiene secciones configuradas en su plantilla."),x(h);return}const p=a.secciones.map(u=>({imagenPrincipal:null,vistaPreviaPrincipal:u.imagen_principal_url||"",imagenSecundaria1:null,vistaPreviaSecundaria1:u.imagen_secundaria1_url||"",imagenSecundaria2:null,vistaPreviaSecundaria2:u.imagen_secundaria2_url||"",titulo:u.titulo||"",subtitulo:u.subtitulo||"",parrafo1:u.parrafo1||""})),y=[...p,...Array(Math.max(0,3-p.length)).fill(h[0])];x(y)}catch(t){console.error("Error cargando plantilla del producto:",t),alert("❌ Ocurrió un error al cargar la plantilla del producto."),x(h)}finally{j(!1)}})()},[s]),f.useEffect(()=>{(async()=>{j(!0);try{const t=localStorage.getItem("token"),r=await fetch($(_.endpoints.productos.all),{method:"GET",headers:{Authorization:`Bearer ${t}`,Accept:"application/json","Content-Type":"application/json"}});if(!r.ok)throw new Error(`Error HTTP: ${r.status}`);const a=await r.json();a.success&&Array.isArray(a.data)?b(a.data):Array.isArray(a)?b(a):b([])}catch(t){console.error("Error al obtener los productos:",t),b([]),alert("❌ No se pudieron cargar los productos. Intenta nuevamente.")}finally{j(!1)}})()},[]);const N=(o,t,r)=>{const a=[...S];a[o][t]=r;const p=r?URL.createObjectURL(r):"";t==="imagenPrincipal"&&(a[o].vistaPreviaPrincipal=p),t==="imagenSecundaria1"&&(a[o].vistaPreviaSecundaria1=p),t==="imagenSecundaria2"&&(a[o].vistaPreviaSecundaria2=p),x(a)},w=(o,t,r)=>{const a=[...S];a[o][t]=r,x(a)},v=(o,t)=>N(o,t,null),T=async o=>{if(o.preventDefault(),s===null){alert("⚠️ Debes seleccionar un producto antes de continuar.");return}const t=new FormData;t.append("producto_id",String(s)),S.forEach((r,a)=>{r.imagenPrincipal&&t.append(`secciones[${a}][imagen_principal]`,r.imagenPrincipal),r.imagenSecundaria1&&t.append(`secciones[${a}][imagenes_secundarias][]`,r.imagenSecundaria1),r.imagenSecundaria2&&t.append(`secciones[${a}][imagenes_secundarias][]`,r.imagenSecundaria2),t.append(`secciones[${a}][titulo]`,r.titulo),t.append(`secciones[${a}][parrafo1]`,r.parrafo1)}),d!=null&&t.append("_method","PUT");try{await i(t)}catch(r){console.error("Error al enviar plantilla:",r),alert("❌ No se pudo guardar la plantilla. Ver consola.")}},A=({emailIndex:o,tipoImagen:t,vistaPrevia:r,etiqueta:a})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a}),r?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r,alt:a,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-300"}),e.jsx("button",{type:"button",onClick:()=>v(o,t),className:"absolute top-2 right-2 bg-red-500 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(U,{size:12})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition",children:[e.jsx(H,{className:"text-gray-400 text-3xl mb-2"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Subir imagen"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:p=>{const y=p.target.files?.[0]||null;N(o,t,y)}})]})]});return e.jsxs("form",{onSubmit:T,className:"space-y-8 max-h-[70vh] overflow-y-auto px-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecciona un producto"}),e.jsxs("select",{value:s??"",onChange:o=>m(o.target.value?Number(o.target.value):null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"-- Elige un producto --"}),E.map(o=>e.jsx("option",{value:o.id,children:o.nombre},o.id))]}),C&&e.jsx("p",{className:"text-sm text-gray-400 italic mt-1",children:"Cargando..."}),!C&&E.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No hay productos disponibles."})]}),S.map((o,t)=>e.jsxs("div",{className:"p-6 bg-gradient-to-br from-red-50 to-indigo-50 rounded-xl shadow-md border border-red-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-[#c11319] mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"bg-[#c11319] text-white w-8 h-8 rounded-full flex items-center justify-center text-sm",children:t+1}),k?e.jsx("span",{children:k.nombre}):e.jsxs("span",{children:["Sección Email ",t+1]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{emailIndex:t,tipoImagen:"imagenPrincipal",vistaPrevia:o.vistaPreviaPrincipal,etiqueta:"Imagen Principal"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(A,{emailIndex:t,tipoImagen:"imagenSecundaria1",vistaPrevia:o.vistaPreviaSecundaria1,etiqueta:"Imagen Secundaria 1"}),e.jsx(A,{emailIndex:t,tipoImagen:"imagenSecundaria2",vistaPrevia:o.vistaPreviaSecundaria2,etiqueta:"Imagen Secundaria 2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:o.titulo,onChange:r=>w(t,"titulo",r.target.value),placeholder:"Escribe el título aquí"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Párrafo 1"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:o.parrafo1,onChange:r=>w(t,"parrafo1",r.target.value),placeholder:"Escribe el párrafo aquí",rows:3})]})]})]},t)),e.jsx("button",{type:"submit",className:"w-full bg-[#c11319] hover:bg-[#fbbc05] text-white font-bold py-3 rounded-lg transition",children:"Guardar plantilla"})]})}function se({onSubmit:i,plantillaId:d=null}){const[s,m]=f.useState(null),[E,b]=f.useState([]),[C,j]=f.useState(!1),[S,x]=f.useState([]),k=E.find(o=>o.id===s),h=Array.from({length:1},()=>({imagenPrincipal:null,vistaPreviaPrincipal:"",titulo:"",parrafo1:""}));f.useEffect(()=>{x(h)},[]),f.useEffect(()=>{if(s===null){x(h);return}(async()=>{try{j(!0);const t=localStorage.getItem("token"),r=await fetch($(_.endpoints.WhatsappProducto.plantillaPorProducto(s)),{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});if(r.status===404){alert("ℹ️ El producto seleccionado no tiene una plantilla asociada."),x(h);return}if(!r.ok)throw new Error("Error al obtener plantilla");const a=await r.json();if(!a?.secciones||a.secciones.length===0){alert("ℹ️ Este producto no tiene secciones configuradas en su plantilla."),x(h);return}const p=a.secciones.map(u=>({imagenPrincipal:null,vistaPreviaPrincipal:u.imagen_principal_url||"",imagenSecundaria1:null,vistaPreviaSecundaria1:u.imagen_secundaria1_url||"",imagenSecundaria2:null,vistaPreviaSecundaria2:u.imagen_secundaria2_url||"",titulo:u.titulo||"",subtitulo:u.subtitulo||"",parrafo1:u.parrafo1||""})),y=[...p,...Array(Math.max(0,3-p.length)).fill(h[0])];x(y)}catch(t){console.error("Error cargando plantilla del producto:",t),alert("❌ Ocurrió un error al cargar la plantilla del producto."),x(h)}finally{j(!1)}})()},[s]),f.useEffect(()=>{(async()=>{j(!0);try{const t=localStorage.getItem("token"),r=await fetch($(_.endpoints.productos.all),{method:"GET",headers:{Authorization:`Bearer ${t}`,Accept:"application/json","Content-Type":"application/json"}});if(!r.ok)throw new Error(`Error HTTP: ${r.status}`);const a=await r.json();a.success&&Array.isArray(a.data)?b(a.data):Array.isArray(a)?b(a):b([])}catch(t){console.error("Error al obtener los productos:",t),b([]),alert("❌ No se pudieron cargar los productos. Intenta nuevamente.")}finally{j(!1)}})()},[]);const N=(o,t,r)=>{const a=[...S];a[o][t]=r;const p=r?URL.createObjectURL(r):"";t==="imagenPrincipal"&&(a[o].vistaPreviaPrincipal=p),x(a)},w=(o,t,r)=>{const a=[...S];a[o][t]=r,x(a)},v=(o,t)=>N(o,t,null),T=async o=>{if(o.preventDefault(),s===null){alert("⚠️ Debes seleccionar un producto antes de continuar.");return}const t=new FormData;t.append("producto_id",String(s)),S.forEach((r,a)=>{r.imagenPrincipal&&t.append(`secciones[${a}][imagen_principal]`,r.imagenPrincipal),t.append(`secciones[${a}][titulo]`,r.titulo),t.append(`secciones[${a}][parrafo1]`,r.parrafo1)}),d!=null&&t.append("_method","PUT");try{await i(t)}catch(r){console.error("Error al enviar plantilla:",r),alert("❌ No se pudo guardar la plantilla. Ver consola.")}},A=({WhatsappIndex:o,tipoImagen:t,vistaPrevia:r,etiqueta:a})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a}),r?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r,alt:a,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-300"}),e.jsx("button",{type:"button",onClick:()=>v(o,t),className:"absolute top-2 right-2 bg-red-500 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(U,{size:12})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition",children:[e.jsx(H,{className:"text-gray-400 text-3xl mb-2"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Subir imagen"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:p=>{const y=p.target.files?.[0]||null;N(o,t,y)}})]})]});return e.jsxs("form",{onSubmit:T,className:"space-y-8 max-h-[70vh] overflow-y-auto px-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecciona un producto"}),e.jsxs("select",{value:s??"",onChange:o=>m(o.target.value?Number(o.target.value):null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"-- Elige un producto --"}),E.map(o=>e.jsx("option",{value:o.id,children:o.nombre},o.id))]}),C&&e.jsx("p",{className:"text-sm text-gray-400 italic mt-1",children:"Cargando..."}),!C&&E.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No hay productos disponibles."})]}),S.map((o,t)=>e.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-indigo-50 rounded-xl shadow-md border border-green-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-green-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"bg-green-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm",children:t+1}),k?e.jsx("span",{children:k.nombre}):e.jsx("span",{children:"Sección Whatsapp "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{WhatsappIndex:t,tipoImagen:"imagenPrincipal",vistaPrevia:o.vistaPreviaPrincipal,etiqueta:"Imagen Principal"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:o.titulo,onChange:r=>w(t,"titulo",r.target.value),placeholder:"Escribe el título aquí"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Párrafo 1"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:o.parrafo1,onChange:r=>w(t,"parrafo1",r.target.value),placeholder:"Escribe el párrafo aquí",rows:3})]})]})]},t)),e.jsx("button",{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition",children:"Guardar plantilla"})]})}class oe{async getAllProductos(d=1,s=6){try{const m=`${_.endpoints.productos.list}?page=${d}&perPage=${s}`,b=await(await fetch(_.apiUrl+m)).json();return console.log("response from getAllProductos2:",b),b}catch(m){throw console.error("[ProductoService] Error obteniendo productos:",m),m}}async getProductoById(d){try{return await O.get(_.endpoints.productos.detail(d))}catch(s){throw console.error("[ProductoService] Error obteniendo producto:",s),s}}async getProductoByLink(d){try{return await O.get(_.endpoints.productos.link(d))}catch(s){throw console.error("[ProductoService] Error obteniendo producto por link:",s),s}}async createProducto(d){try{const s=this.buildFormData(d);return await O.authenticatedPostFormData(_.endpoints.productos.create,s)}catch(s){throw console.error("[ProductoService] Error creando producto:",s),s}}async updateProducto(d,s){try{const m=this.buildFormData(s);return await O.authenticatedPutFormData(_.endpoints.productos.update(d),m)}catch(m){throw console.error("[ProductoService] Error actualizando producto:",m),m}}async deleteProducto(d){try{return await O.authenticatedDelete(_.endpoints.productos.delete(d))}catch(s){throw console.error("[ProductoService] Error eliminando producto:",s),s}}buildFormData(d){const s=new FormData;return s.append("link",d.link),s.append("nombre",d.nombre),s.append("titulo",d.titulo),s.append("descripcion",d.descripcion),s.append("seccion",d.seccion),(d.imagen_principal_file||d.imagen_principal_file)&&s.append("imagen_principal",d.imagen_principal_file),d.imagenes_files&&d.imagenes_files.forEach((m,E)=>{s.append(`imagenes[${E}]`,m)}),s}}const F=new oe;function ne(){const[i,d]=f.useState([]),[s,m]=f.useState(!0),[E,b]=f.useState(null),[C,j]=f.useState({current_page:1,last_page:1,per_page:6,total:0});console.log("PRODUCTOS HOOK:",i);const S=async(N=1,w=C.per_page)=>{m(!0),b(null);try{const v=await F.getAllProductos(N,w);console.log("response from getAllProductos:",v.data),d(v.data),j({current_page:v.current_page,last_page:v.last_page,per_page:v.per_page,total:v.total})}catch(v){b(v instanceof Error?v.message:"Error desconocido al obtener productos"),console.error("Error en useProducts:",v)}finally{m(!1)}},x=async(N,w)=>{await S(N,w)};return f.useEffect(()=>{S(C.current_page,C.per_page)},[]),{productos:i,loading:s,error:E,pagination:C,refetch:x,createProduct:async N=>{m(!0),b(null);try{const w=await F.createProducto(N);return x(C.current_page),w.data}catch(w){return b(w instanceof Error?w.message:"Error desconocido al crear producto"),console.error("Error al crear producto:",w),null}finally{m(!1)}},updateProduct:async(N,w)=>{m(!0),b(null);try{const v=await F.updateProducto(N,w);if(!v.data)throw new Error("Producto no encontrado");return d(T=>T.map(A=>A.id===N?v.data:A)),v.data}catch(v){return b(v instanceof Error?v.message:"Error desconocido al actualizar producto"),console.error("Error al actualizar producto:",v),null}finally{m(!1)}}}}function fe(){const{productos:i,loading:d,pagination:s,refetch:m}=ne(),[E,b]=f.useState(!1),[C,j]=f.useState(!1),[S,x]=f.useState(!1),[k,h]=f.useState(void 0),{darkMode:N}=re(),w=async r=>{const a=$(_.endpoints.productos.create),p=localStorage.getItem("token");if(!p){P.fire("Error","No hay token de autenticación. Por favor inicia sesión.","error");return}try{const y=k?$(_.endpoints.productos.update(k.id)):a,u=await fetch(y,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${p}`,"X-Requested-With":"XMLHttpRequest"},body:r}),l=await u.json();if(u.ok)P.fire({title:l.message||"Producto guardado exitosamente",icon:"success"}),b(!1),m(s.current_page);else{let n=l.message||"Error desconocido";u.status===401?(n="Token expirado o inválido. Por favor inicia sesión nuevamente.",localStorage.removeItem("token")):u.status===403?n="Acceso denegado. Permisos insuficientes.":u.status===422&&(n="Datos inválidos: "+l.message),P.fire("Error",n,"error")}}catch{P.fire("Error","Hubo un error al insertar el producto","error")}},v=async r=>{const a=localStorage.getItem("token");if(!a){P.fire("Error","No hay token de autenticación. Por favor inicia sesión.","error");return}const p=$(_.endpoints.emailProducto.create);try{const y=await fetch(p,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${a}`},body:r}),u=await y.json();if(y.ok)P.fire({title:u.message||"Email enviado con éxito",icon:"success"}),j(!1);else{let l=u.message||"Error al enviar email";y.status===401?(l="Token expirado o inválido. Por favor inicia sesión nuevamente.",localStorage.removeItem("token")):y.status===422&&(l="Datos inválidos: "+u.message),P.fire("Error",l,"error")}}catch{P.fire("Error","No se pudo conectar con el servidor.","error")}},T=async r=>{const a=localStorage.getItem("token");if(!a){P.fire("Error","No hay token de autenticación. Por favor inicia sesión.","error");return}const p=$(_.endpoints.emailProducto.create);try{const y=await fetch(p,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${a}`},body:r}),u=await y.json();if(y.ok)P.fire({title:u.message||"Email enviado con éxito",icon:"success"}),j(!1);else{let l=u.message||"Error al enviar email";y.status===401?(l="Token expirado o inválido. Por favor inicia sesión nuevamente.",localStorage.removeItem("token")):y.status===422&&(l="Datos inválidos: "+u.message),P.fire("Error",l,"error")}}catch{P.fire("Error","No se pudo conectar con el servidor.","error")}},A=async r=>{const a=$(_.endpoints.productos.delete(r)),p=localStorage.getItem("token");if(!p){P.fire({title:"Error de autenticación",text:"No se encontró token de acceso. Por favor inicia sesión nuevamente.",icon:"error",confirmButtonText:"Entendido"});return}if((await P.fire({title:"¿Estás seguro?",text:"¡Esta acción no se puede deshacer!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{const u=await fetch(a,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${p}`,"X-Requested-With":"XMLHttpRequest"}}),l=await u.json();if(u.ok)P.fire("¡Eliminado!",l.message,"success"),m(s.current_page);else{let n=l.message||"Error desconocido al eliminar";u.status===401?(n="Token expirado o inválido. Por favor inicia sesión nuevamente.",localStorage.removeItem("token")):u.status===403?n="Acceso denegado. No tienes permisos para eliminar productos.":u.status===404&&(n="El producto no existe o ya fue eliminado."),P.fire("Error",n,"error")}}catch{P.fire("Error","No se pudo conectar con el servidor.","error")}},o=r=>{m(r,s.per_page)},t=r=>{h(r),b(!0)};return f.useEffect(()=>(document.body.style.overflow=E?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[E]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row gap-4 mb-4",children:[e.jsx("button",{onClick:()=>{h(void 0),b(!0)},className:"mt-4 bg-blue-950 hover:bg-blue-800 text-white text-lg px-10 py-1.5 rounded-full flex items-center gap-2",children:"Añadir Producto"}),e.jsx("button",{onClick:()=>j(!0),className:"mt-4 bg-[#bb001b] hover:bg-[#fbbc05] text-white text-lg px-10 py-1.5 rounded-full flex items-center gap-2",children:"Envío de Emails"}),e.jsx("button",{onClick:()=>x(!0),className:"mt-4 bg-green-700 hover:bg-green-600 text-white text-lg px-10 py-1.5 rounded-full flex items-center gap-2",children:"Envío de Whatsapp"})]}),e.jsx("div",{className:"overflow-x-auto p-4",children:e.jsxs(ee,{tableType:"productos",children:[e.jsx("thead",{className:"hidden md:table-header-group",children:e.jsx("tr",{children:["ID","Nombre","Sección","Precio","Acción"].map(r=>e.jsx("th",{className:`px-4 py-2 text-white uppercase text-xs font-bold rounded-md ${N?"bg-cyan-900":"bg-cyan-400"}`,children:r},r))})}),e.jsx("tbody",{children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-12",children:e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-teal-500"}),e.jsx("span",{className:"text-teal-500 font-medium",children:"Cargando productos..."})]})})}):i.length>0?i.map((r,a)=>{const p=a%2===0&&N?"bg-white text-black":"text-black bg-white",y=r.id??`producto-${a}`;return e.jsxs("tr",{className:`text-center md:table-row block md:mb-0 mb-4 rounded-lg shadow-sm ${p}`,children:[e.jsx("td",{className:"px-4 py-2 border",children:r.id}),e.jsx("td",{className:"px-4 py-2 border",children:r.nombre}),e.jsx("td",{className:"px-4 py-2 border",children:r.seccion}),e.jsxs("td",{className:"px-4 py-2 border",children:["$",r.precio?.toFixed(2)]}),e.jsx("td",{className:"px-4 py-2 border",children:e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>t(r),className:"p-2 text-yellow-600 hover:text-yellow-800 bg-yellow-100 rounded-lg shadow-sm",title:"Editar",children:e.jsx(Q,{size:18})}),e.jsx("button",{onClick:()=>A(r.id),className:"p-2 text-red-600 hover:text-red-800 bg-red-100 rounded-lg shadow-sm",title:"Eliminar",children:e.jsx(Y,{size:18})})]})})]},y)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-16 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"bg-teal-50 p-6 rounded-full",children:e.jsx(Z,{className:"h-10 w-10 text-teal-300"})}),e.jsx("p",{className:"text-xl font-medium text-gray-600 mt-4",children:"No hay productos registrados"}),e.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:"Comienza agregando productos a tu catálogo con el botón 'Añadir Producto'"})]})})})})]})}),s.last_page>1&&e.jsxs("div",{className:"flex justify-center items-center mt-4 gap-2",children:[e.jsx("button",{onClick:()=>o(s.current_page-1),disabled:s.current_page===1,className:"px-4 py-2 bg-blue-950 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:s.last_page},(r,a)=>{const p=a+1;return e.jsx("button",{onClick:()=>o(p),className:`px-3 py-2 rounded-md ${s.current_page===p?"bg-blue-950 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:p},p)})}),e.jsx("button",{onClick:()=>o(s.current_page+1),disabled:s.current_page===s.last_page,className:"px-4 py-2 bg-blue-950 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]}),e.jsx(z,{isOpen:E,onClose:()=>{b(!1),h(void 0)},title:k?"Editar Datos":"Ingresar Datos",children:e.jsx(te,{initialData:k,onSubmit:w,isEditing:!!k})}),e.jsx(z,{isOpen:C,onClose:()=>j(!1),title:"Envio de Emails",children:e.jsx(ae,{onSubmit:v})}),e.jsx(z,{isOpen:S,onClose:()=>x(!1),title:"Envio de Whatsapp",children:e.jsx(se,{onSubmit:T})})]})}export{fe as default};
