import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as x,R as A}from"./index.Be8AcK8B.js";import{d as Ee,k as Ne}from"./index.CvDk6RGp.js";import{g as J,c as K}from"./config.CelHcebK.js";import{S as te}from"./sweetalert2.esm.all.Bj_ZQUAw.js";import{T as Se}from"./TableContainer.C49vMdQY.js";import{d as Ce,S as Pe,c as ke,P as de,A as Ie}from"./autoplay.C5Y-zvcZ.js";/* empty css                       */import"./admin.30f82b17.l0sNRNKZ.js";import{u as $e}from"./useDarkMode.C4HGFL6C.js";import"./iconBase.Db4UJpFa.js";const Le=({isOpen:a,setIsOpen:t,blogToEdit:n,onSuccess:s})=>{const[b,d]=x.useState([]),[h,v]=x.useState(""),[l,P]=x.useState(!1),[m,w]=x.useState(!1),[y,S]=x.useState(null),[$,p]=x.useState(null),[u,i]=x.useState(null),[j,E]=x.useState(""),[g,N]=x.useState(!1),[C,k]=x.useState(""),B={producto_id:"",subtitulo:"",link:"",meta_titulo:"",meta_descripcion:"",imagen_principal:null,text_alt_principal:"",alt_imagen_card:"",imagenes_secundarias:[null,null,null],alt_imagenes_secundarias:["","",""],parrafo1:"",beneficios:["","",""],parrafo2:"",url_video:""},[r,I]=x.useState(B),M=o=>o?typeof o=="string"?o:o.parrafo||"":"";x.useEffect(()=>{if(a)if(n){const o=n.producto_id?.toString()||"";let c=M(n.parrafos?.[0]),f=["","",""];if(Array.isArray(n.parrafos))for(let O=1;O<=3;O++)f[O-1]=M(n.parrafos[O]);let _=M(n.parrafos?.[4]);I({producto_id:o,subtitulo:n.subtitulo||"",link:n.link||"",meta_titulo:n.etiqueta?.meta_titulo||"",meta_descripcion:n.etiqueta?.meta_descripcion||"",imagen_principal:null,text_alt_principal:n.text_alt_principal||"",alt_imagen_card:n.alt_imagen_card||"",imagenes_secundarias:[null,null,null],alt_imagenes_secundarias:[n.imagenes?.[0]?.text_alt||"",n.imagenes?.[1]?.text_alt||"",n.imagenes?.[2]?.text_alt||""],parrafo1:c,beneficios:f,parrafo2:_,url_video:n.url_video||""}),v(n.nombre_producto||"")}else I(B),v("")},[a,n]),x.useEffect(()=>{(async()=>{if(a){P(!0);try{const c=localStorage.getItem("token"),f=await fetch(J(K.endpoints.productos.all),{method:"GET",headers:{Authorization:`Bearer ${c}`,Accept:"application/json","Content-Type":"application/json"}});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const _=await f.json();_.success&&Array.isArray(_.data)?d(_.data):Array.isArray(_)?d(_):d([])}catch(c){console.error("Error al obtener productos:",c),d([]),alert("âŒ Error al cargar los productos. Por favor, intenta de nuevo.")}finally{P(!1)}}})()},[a]);const z=o=>{I({...r,[o.target.name]:o.target.value})},W=o=>{I({...r,[o.target.name]:o.target.value})},X=(o,c)=>{const f=o.target.files?.[0];if(f){if(f.size>2048*1024){te.fire({icon:"warning",title:"Â¡Imagen muy grande!",text:"MÃ¡x. 2 MB."}),o.target&&(o.target.value="");return}I({...r,[c]:f})}},Y=(o,c)=>{const f=o.target.files?.[0]||null;if(f&&f.size>2048*1024){te.fire({icon:"warning",title:"Â¡Imagen muy grande!",text:"MÃ¡x. 2 MB."}),o.target&&(o.target.value="");return}const _=[...r.imagenes_secundarias];_[c]=f,I({...r,imagenes_secundarias:_})},re=(o,c)=>{const f=[...r.alt_imagenes_secundarias];f[c]=o.target.value,I({...r,alt_imagenes_secundarias:f})},ne=o=>{I({...r,parrafo1:o.target.value})},se=o=>{I({...r,parrafo2:o.target.value})},T=(o,c)=>{const f=[...r.beneficios];f[c]=o.target.value,I({...r,beneficios:f})},D=(o,c)=>{let f="";o==="parrafo1"?f="parrafo1":o==="parrafo2"?f="parrafo2":o==="beneficio"&&c!==void 0&&(f=`beneficio-${c}`);const _=document.getElementById(f);if(!_)return;const O=_.selectionStart,L=_.selectionEnd;if(O===L){te.fire("Selecciona texto","Selecciona una palabra o frase antes de insertar el enlace.","warning");return}const U=_.value.substring(O,L);S(o),p(c!==void 0?c:null),i({start:O,end:L}),E(U),w(!0)},he=()=>{if(!y||!u||!C.trim())return;const o=`<strong><a href="${C}" target="_blank" rel="noopener noreferrer">${j}</a></strong>`;let c="";if(y==="parrafo1"){const f=r.parrafo1;c=f.slice(0,u.start)+o+f.slice(u.end),I({...r,parrafo1:c})}else if(y==="parrafo2"){const f=r.parrafo2;c=f.slice(0,u.start)+o+f.slice(u.end),I({...r,parrafo2:c})}else if(y==="beneficio"&&$!==null){const f=r.beneficios[$];c=f.slice(0,u.start)+o+f.slice(u.end);const _=[...r.beneficios];_[$]=c,I({...r,beneficios:_})}G()},le=(o,c)=>{let f="";o==="parrafo1"?f="parrafo1":o==="parrafo2"?f="parrafo2":o==="beneficio"&&c!==void 0&&(f=`beneficio-${c}`);const _=document.getElementById(f);if(!_)return;const O=_.selectionStart,L=_.selectionEnd,U=_.value.substring(O,L);if(!U){te.fire("Selecciona texto","Selecciona una palabra o frase para enlazar a un producto.","warning");return}S(o),p(c!==void 0?c:null),i({start:O,end:L}),E(U),N(!0)},ve=o=>{if(!y||!u)return;const c=`<strong><a href="/products/${o.link}" title="${o.nombre}">${j}</a></strong>`;let f="";if(y==="parrafo1"){const _=r.parrafo1;f=_.slice(0,u.start)+c+_.slice(u.end),I({...r,parrafo1:f})}else if(y==="parrafo2"){const _=r.parrafo2;f=_.slice(0,u.start)+c+_.slice(u.end),I({...r,parrafo2:f})}else if(y==="beneficio"&&$!==null){const _=r.beneficios[$];f=_.slice(0,u.start)+c+_.slice(u.end);const O=[...r.beneficios];O[$]=f,I({...r,beneficios:O})}G()},G=()=>{S(null),p(null),i(null),E(""),w(!1),N(!1),k("")},oe=()=>{t(!1),G(),I(B)},we=async o=>{o.preventDefault();const c=!!n;if(!r.producto_id)return alert("âš ï¸ Debe seleccionar un producto.");if(!r.subtitulo.trim())return alert("âš ï¸ El subtÃ­tulo es obligatorio.");if(!c&&!r.imagen_principal)return alert("âš ï¸ La imagen principal es obligatoria para crear.");if(r.beneficios.filter(O=>O&&O.trim()).length<3)return alert("âš ï¸ Debe haber al menos 3 beneficios con contenido.");if(!r.parrafo1.trim())return alert("âš ï¸ El pÃ¡rrafo 1 (introducciÃ³n) es obligatorio.");if(!r.parrafo2.trim())return alert("âš ï¸ El pÃ¡rrafo 2 (conclusiÃ³n/testimonio) es obligatorio.");const _=/^[a-z0-9]+(?:-[a-z0-9]+)*$/;if(r.link&&!_.test(r.link))return alert("âš ï¸ El link debe ser URL-friendly (Solo letras minÃºsculas, guiones y nÃºmeros).");try{P(!0);const O=localStorage.getItem("token"),L=new FormData;L.append("producto_id",r.producto_id),L.append("subtitulo",r.subtitulo),L.append("url_video",r.url_video),r.link?.trim()&&L.append("link",r.link.trim());const U={meta_titulo:r.meta_titulo?.trim()||"",meta_descripcion:r.meta_descripcion?.trim()||""};(U.meta_titulo||U.meta_descripcion)&&L.append("etiqueta",JSON.stringify(U)),r.text_alt_principal?.trim()&&L.append("text_alt_principal",r.text_alt_principal.trim()),r.alt_imagen_card?.trim()&&L.append("alt_imagen_card",r.alt_imagen_card.trim()),r.imagen_principal&&L.append("imagen_principal",r.imagen_principal),r.imagenes_secundarias.filter(R=>R!==null).forEach(R=>L.append("imagenes[]",R)),r.alt_imagenes_secundarias.forEach((R,F)=>{(r.imagenes_secundarias[F]!==null||c&&R.trim())&&L.append("alt_imagenes[]",R.trim())}),L.append("parrafos[0]",r.parrafo1.trim()),r.beneficios.forEach((R,F)=>{R&&R.trim()&&L.append(`parrafos[${F+1}]`,R.trim())});const je=r.beneficios.length+1;L.append(`parrafos[${je}]`,r.parrafo2.trim());const _e=c?J(K.endpoints.blogs.update(n.id)):J(K.endpoints.blogs.create);c&&L.append("_method","PUT");const ee=await fetch(_e,{method:"POST",body:L,headers:{Authorization:`Bearer ${O}`,Accept:"application/json"}});let q;try{q=await ee.json()}catch{q=await ee.text()}if(ee.ok)alert(`âœ… Blog ${c?"actualizado":"creado"} correctamente.`),oe(),s?.();else if(q.errors){let R=`âŒ Errores de validaciÃ³n:
`;Object.keys(q.errors).forEach(F=>{const ye=Array.isArray(q.errors[F])?q.errors[F]:[q.errors[F]];R+=`â€¢ ${F}: ${ye.join(", ")}
`}),alert(R)}else alert(`âŒ Error (${ee.status}): ${q.message||JSON.stringify(q)}`)}catch(O){console.error("âŒ Error en la solicitud:",O),alert("âŒ Error en la conexiÃ³n con el servidor.")}finally{P(!1)}};return a?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:e.jsxs("div",{className:"bg-white text-black px-4 sm:px-6 md:px-8 py-6 rounded-lg max-h-[90vh] w-full max-w-5xl mx-2 overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center md:text-left",children:n?"Editar Blog":"AÃ±adir Blog"}),e.jsxs("form",{onSubmit:we,encType:"multipart/form-data",className:"space-y-8",children:[e.jsxs("div",{className:"bg-blue-50 p-4 sm:p-6 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"InformaciÃ³n Principal & SEO"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"col-span-1 md:col-span-4",children:[e.jsxs("label",{className:"block mb-2 font-medium",children:["Producto ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"producto_id",value:r.producto_id,onChange:W,required:!0,className:"w-full bg-white text-black p-2 rounded-md border border-gray-300",disabled:l,children:[e.jsx("option",{value:"",children:l?"Cargando productos...":"-- Selecciona un producto --"}),b.map(o=>e.jsx("option",{value:o.id.toString(),children:o.nombre||`Producto ${o.id}`},o.id))]}),e.jsx("small",{className:"text-gray-500",children:"Selecciona el producto relacionado con este blog. Requerido."}),h&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Producto seleccionado: ",e.jsx("strong",{children:h})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsxs("label",{className:"block font-medium mb-1",children:["SubtÃ­tulo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{name:"subtitulo",value:r.subtitulo,onChange:z,className:"w-full border border-gray-300 rounded px-3 py-2",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"MÃ¡x. 120 caracteres (letras, nÃºmeros y espacios)."})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block font-medium mb-1",children:"Meta tÃ­tulo"}),e.jsx("input",{type:"text",name:"meta_titulo",value:r.meta_titulo||"",onChange:z,placeholder:"TÃ­tulo optimizado para SEO",className:"w-full border border-gray-300 rounded px-3 py-2"}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"MÃ¡x. 70 caracteres (letras, nÃºmeros y espacios)."})]}),e.jsxs("div",{className:"col-span-1 md:col-span-4",children:[e.jsx("label",{className:"block font-medium mb-1",children:"Meta descripciÃ³n"}),e.jsx("textarea",{name:"meta_descripcion",value:r.meta_descripcion||"",onChange:z,placeholder:"DescripciÃ³n optimizada para SEO",className:"w-full border border-gray-300 rounded px-3 py-2"}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"MÃ¡x. 160 caracteres (letras, nÃºmeros y espacios)."})]}),e.jsxs("div",{className:"col-span-1 md:col-span-4",children:[e.jsx("label",{className:"block font-medium mb-1",children:"Link (URL amigable)"}),e.jsx("input",{type:"text",name:"link",value:r.link,onChange:z,placeholder:"ejemplo: mi-blog-post",className:"w-full border border-gray-300 rounded px-3 py-2"}),e.jsx("small",{className:"text-gray-500",children:"Escribe solo letras y guiones. MÃ¡x. 255 letras o nÃºmeros."})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 sm:p-6 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"ImÃ¡genes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-green-400 rounded p-4",children:[e.jsxs("label",{className:"block font-medium mb-2",children:["Imagen Principal"," ",!n&&e.jsx("span",{className:"text-red-500",children:"*"})]}),n?.imagen_principal&&e.jsx("img",{src:n.imagen_principal,alt:r.text_alt_principal||"Imagen principal",className:"w-full h-48 sm:h-64 object-cover rounded mb-4 border"}),e.jsx("input",{type:"file",accept:"image/*",onChange:o=>X(o,"imagen_principal"),className:"w-full file:py-2 file:px-3 file:border-0 file:bg-green-100 file:text-green-700 hover:file:bg-green-200"}),e.jsx("small",{className:"text-gray-500",children:"Peso mÃ¡ximo: 2 MB."}),e.jsx("input",{type:"text",name:"text_alt_principal",placeholder:"Texto ALT para SEO",value:r.text_alt_principal,onChange:z,className:"mt-2 w-full border border-gray-300 rounded px-3 py-2"})]}),e.jsxs("div",{className:"border border-green-400 rounded p-4",children:[e.jsx("label",{className:"block font-semibold mb-4",children:"ImÃ¡genes Secundarias"}),e.jsx("small",{className:"text-gray-500",children:"ImÃ¡genes adicionales del artÃ­culo. Se crearÃ¡ un registro por archivo en la tabla imagen_blogs."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:r.imagenes_secundarias.map((o,c)=>e.jsxs("div",{className:"flex flex-col items-center",children:[n?.imagenes?.[c]?.ruta_imagen&&e.jsx("img",{src:n.imagenes[c].ruta_imagen,alt:r.alt_imagenes_secundarias[c]||`Imagen secundaria #${c+1}`,className:"w-full h-32 object-cover rounded mb-2 border"}),e.jsx("input",{type:"file",accept:"image/*",onChange:f=>Y(f,c),className:"w-full file:py-2 file:px-3 file:border-0 file:bg-green-100 file:text-green-700 hover:file:bg-green-200"}),e.jsxs("small",{className:"text-gray-500",children:["Archivo de imagen secundaria #",c+1,".",e.jsx("br",{}),"TamaÃ±o mÃ¡ximo: 2 MB."]}),e.jsx("input",{type:"text",placeholder:`Texto ALT imagen secundaria #${c+1}`,value:r.alt_imagenes_secundarias[c],onChange:f=>re(f,c),className:"w-full border border-gray-300 rounded px-3 py-2 mt-2"})]},c))})]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 sm:p-6 rounded-lg border border-purple-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-4",children:"Video"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL del Video *"}),e.jsx("input",{type:"url",name:"url_video",value:r.url_video,onChange:z,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("small",{className:"text-gray-500",children:"Solo minÃºsculas y guiones. Hasta 255 letras, nÃºmeros o espacios."})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 sm:p-6 rounded-lg border border-yellow-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-yellow-800 mb-4",children:["Contenido del Blog ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative mb-8",children:[e.jsxs("label",{htmlFor:"parrafo1",className:"block text-sm font-medium text-gray-700 mb-2",children:["PÃ¡rrafo 1 (IntroducciÃ³n) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"parrafo1",value:r.parrafo1,onChange:ne,className:"w-full border border-gray-300 rounded px-3 py-2 pr-20",rows:5,placeholder:"Escribe aquÃ­ la introducciÃ³n del blog...",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Este pÃ¡rrafo aparecerÃ¡ en la primera secciÃ³n del blog."}),e.jsxs("div",{className:"absolute top-10 right-2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>D("parrafo1"),className:"bg-blue-500 hover:bg-blue-700 text-white p-2 rounded-full shadow-lg transition text-sm",title:"Insertar enlace URL",children:"ðŸ”— URL"}),e.jsx("button",{type:"button",onClick:()=>le("parrafo1"),className:"bg-green-500 hover:bg-green-700 text-white p-2 rounded-full shadow-lg transition text-sm",title:"Enlazar producto",children:"ðŸ›’ Producto"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Lista de Beneficios ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("small",{className:"text-gray-500 block mb-4",children:"3 beneficios requeridos. Cada beneficio aparecerÃ¡ como un Ã­tem en la lista."}),r.beneficios.map((o,c)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-white rounded border",children:[e.jsxs("label",{htmlFor:`beneficio-${c}`,className:"block text-sm font-medium text-gray-700 mb-2",children:["Beneficio ",c+1," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:`beneficio-${c}`,value:o,onChange:f=>T(f,c),className:"w-full border border-gray-300 rounded px-3 py-2 pr-20",rows:3,placeholder:`Describe el beneficio ${c+1}...`,required:!0}),e.jsxs("div",{className:"absolute top-12 right-6 flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>D("beneficio",c),className:"bg-blue-500 hover:bg-blue-700 text-white p-2 rounded-full shadow-lg transition text-sm",title:"Insertar enlace URL",children:"ðŸ”—"}),e.jsx("button",{type:"button",onClick:()=>le("beneficio",c),className:"bg-green-500 hover:bg-green-700 text-white p-2 rounded-full shadow-lg transition text-sm",title:"Enlazar producto",children:"ðŸ›’"})]})]},c))]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsxs("label",{htmlFor:"parrafo2",className:"block text-sm font-medium text-gray-700 mb-2",children:["PÃ¡rrafo 2 (ConclusiÃ³n/Testimonio) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"parrafo2",value:r.parrafo2,onChange:se,className:"w-full border border-gray-300 rounded px-3 py-2 pr-20",rows:5,placeholder:"Escribe aquÃ­ la conclusiÃ³n o testimonio del blog...",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Este pÃ¡rrafo aparecerÃ¡ en la secciÃ³n de testimonio del cliente."}),e.jsxs("div",{className:"absolute top-10 right-2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>D("parrafo2"),className:"bg-blue-500 hover:bg-blue-700 text-white p-2 rounded-full shadow-lg transition text-sm",title:"Insertar enlace URL",children:"ðŸ”— URL"}),e.jsx("button",{type:"button",onClick:()=>le("parrafo2"),className:"bg-green-500 hover:bg-green-700 text-white p-2 rounded-full shadow-lg transition text-sm",title:"Enlazar producto",children:"ðŸ›’ Producto"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4",children:[e.jsx("button",{type:"button",onClick:oe,className:"bg-gray-300 hover:bg-gray-400 px-4 py-2 rounded",disabled:l,children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded disabled:opacity-50",children:l?"Procesando...":n?"Actualizar":"Crear"})]})]}),m&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-[60]",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Insertar Enlace"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Texto seleccionado: ",e.jsxs("strong",{children:['"',j,'"']})]}),e.jsx("input",{type:"url",value:C,onChange:o=>k(o.target.value),placeholder:"https://ejemplo.com",className:"w-full border border-gray-300 rounded px-3 py-2 mb-4",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:G,className:"bg-gray-300 hover:bg-gray-400 px-4 py-2 rounded",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:he,disabled:!C.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white px-4 py-2 rounded",children:"Insertar"})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-[60]",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Enlazar a Producto"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Texto seleccionado: ",e.jsxs("strong",{children:['"',j,'"']})]}),e.jsxs("select",{onChange:o=>{const c=parseInt(o.target.value),f=b.find(_=>_.id===c);f&&ve(f)},className:"w-full border border-gray-300 rounded px-3 py-2 mb-4",children:[e.jsx("option",{value:"",children:"-- Seleccionar producto --"}),b.map(o=>e.jsx("option",{value:o.id,children:o.nombre},o.id))]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:G,className:"bg-gray-300 hover:bg-gray-400 px-4 py-2 rounded",children:"Cancelar"})})]})})]})}):null},ue=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function V(a){return typeof a=="object"&&a!==null&&a.constructor&&Object.prototype.toString.call(a).slice(8,-1)==="Object"&&!a.__swiper__}function H(a,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter(s=>n.indexOf(s)<0).forEach(s=>{typeof a[s]>"u"?a[s]=t[s]:V(t[s])&&V(a[s])&&Object.keys(t[s]).length>0?t[s].__swiper__?a[s]=t[s]:H(a[s],t[s]):a[s]=t[s]})}function pe(a){return a===void 0&&(a={}),a.navigation&&typeof a.navigation.nextEl>"u"&&typeof a.navigation.prevEl>"u"}function fe(a){return a===void 0&&(a={}),a.pagination&&typeof a.pagination.el>"u"}function me(a){return a===void 0&&(a={}),a.scrollbar&&typeof a.scrollbar.el>"u"}function ge(a){a===void 0&&(a="");const t=a.split(" ").map(s=>s.trim()).filter(s=>!!s),n=[];return t.forEach(s=>{n.indexOf(s)<0&&n.push(s)}),n.join(" ")}function Oe(a){return a===void 0&&(a=""),a?a.includes("swiper-wrapper")?a:`swiper-wrapper ${a}`:"swiper-wrapper"}function Ae(a){let{swiper:t,slides:n,passedParams:s,changedParams:b,nextEl:d,prevEl:h,scrollbarEl:v,paginationEl:l}=a;const P=b.filter(r=>r!=="children"&&r!=="direction"&&r!=="wrapperClass"),{params:m,pagination:w,navigation:y,scrollbar:S,virtual:$,thumbs:p}=t;let u,i,j,E,g,N,C,k;b.includes("thumbs")&&s.thumbs&&s.thumbs.swiper&&m.thumbs&&!m.thumbs.swiper&&(u=!0),b.includes("controller")&&s.controller&&s.controller.control&&m.controller&&!m.controller.control&&(i=!0),b.includes("pagination")&&s.pagination&&(s.pagination.el||l)&&(m.pagination||m.pagination===!1)&&w&&!w.el&&(j=!0),b.includes("scrollbar")&&s.scrollbar&&(s.scrollbar.el||v)&&(m.scrollbar||m.scrollbar===!1)&&S&&!S.el&&(E=!0),b.includes("navigation")&&s.navigation&&(s.navigation.prevEl||h)&&(s.navigation.nextEl||d)&&(m.navigation||m.navigation===!1)&&y&&!y.prevEl&&!y.nextEl&&(g=!0);const B=r=>{t[r]&&(t[r].destroy(),r==="navigation"?(t.isElement&&(t[r].prevEl.remove(),t[r].nextEl.remove()),m[r].prevEl=void 0,m[r].nextEl=void 0,t[r].prevEl=void 0,t[r].nextEl=void 0):(t.isElement&&t[r].el.remove(),m[r].el=void 0,t[r].el=void 0))};b.includes("loop")&&t.isElement&&(m.loop&&!s.loop?N=!0:!m.loop&&s.loop?C=!0:k=!0),P.forEach(r=>{if(V(m[r])&&V(s[r]))H(m[r],s[r]),(r==="navigation"||r==="pagination"||r==="scrollbar")&&"enabled"in s[r]&&!s[r].enabled&&B(r);else{const I=s[r];(I===!0||I===!1)&&(r==="navigation"||r==="pagination"||r==="scrollbar")?I===!1&&B(r):m[r]=s[r]}}),P.includes("controller")&&!i&&t.controller&&t.controller.control&&m.controller&&m.controller.control&&(t.controller.control=m.controller.control),b.includes("children")&&n&&$&&m.virtual.enabled&&($.slides=n,$.update(!0)),b.includes("children")&&n&&m.loop&&(k=!0),u&&p.init()&&p.update(!0),i&&(t.controller.control=m.controller.control),j&&(t.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(m.pagination.el=l),w.init(),w.render(),w.update()),E&&(t.isElement&&(!v||typeof v=="string")&&(v=document.createElement("div"),v.classList.add("swiper-scrollbar"),v.part.add("scrollbar"),t.el.appendChild(v)),v&&(m.scrollbar.el=v),S.init(),S.updateSize(),S.setTranslate()),g&&(t.isElement&&((!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-button-next"),d.innerHTML=t.hostEl.constructor.nextButtonSvg,d.part.add("button-next"),t.el.appendChild(d)),(!h||typeof h=="string")&&(h=document.createElement("div"),h.classList.add("swiper-button-prev"),h.innerHTML=t.hostEl.constructor.prevButtonSvg,h.part.add("button-prev"),t.el.appendChild(h))),d&&(m.navigation.nextEl=d),h&&(m.navigation.prevEl=h),y.init(),y.update()),b.includes("allowSlideNext")&&(t.allowSlideNext=s.allowSlideNext),b.includes("allowSlidePrev")&&(t.allowSlidePrev=s.allowSlidePrev),b.includes("direction")&&t.changeDirection(s.direction,!1),(N||k)&&t.loopDestroy(),(C||k)&&t.loopCreate(),t.update()}function Be(a,t){a===void 0&&(a={}),t===void 0&&(t=!0);const n={on:{}},s={},b={};H(n,Ce),n._emitClasses=!0,n.init=!1;const d={},h=ue.map(l=>l.replace(/_/,"")),v=Object.assign({},a);return Object.keys(v).forEach(l=>{typeof a[l]>"u"||(h.indexOf(l)>=0?V(a[l])?(n[l]={},b[l]={},H(n[l],a[l]),H(b[l],a[l])):(n[l]=a[l],b[l]=a[l]):l.search(/on[A-Z]/)===0&&typeof a[l]=="function"?t?s[`${l[2].toLowerCase()}${l.substr(3)}`]=a[l]:n.on[`${l[2].toLowerCase()}${l.substr(3)}`]=a[l]:d[l]=a[l])}),["navigation","pagination","scrollbar"].forEach(l=>{n[l]===!0&&(n[l]={}),n[l]===!1&&delete n[l]}),{params:n,passedParams:b,rest:d,events:s}}function Te(a,t){let{el:n,nextEl:s,prevEl:b,paginationEl:d,scrollbarEl:h,swiper:v}=a;pe(t)&&s&&b&&(v.params.navigation.nextEl=s,v.originalParams.navigation.nextEl=s,v.params.navigation.prevEl=b,v.originalParams.navigation.prevEl=b),fe(t)&&d&&(v.params.pagination.el=d,v.originalParams.pagination.el=d),me(t)&&h&&(v.params.scrollbar.el=h,v.originalParams.scrollbar.el=h),v.init(n)}function ze(a,t,n,s,b){const d=[];if(!t)return d;const h=l=>{d.indexOf(l)<0&&d.push(l)};if(n&&s){const l=s.map(b),P=n.map(b);l.join("")!==P.join("")&&h("children"),s.length!==n.length&&h("children")}return ue.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in a&&l in t)if(V(a[l])&&V(t[l])){const P=Object.keys(a[l]),m=Object.keys(t[l]);P.length!==m.length?h(l):(P.forEach(w=>{a[l][w]!==t[l][w]&&h(l)}),m.forEach(w=>{a[l][w]!==t[l][w]&&h(l)}))}else a[l]!==t[l]&&h(l)}),d}const Re=a=>{!a||a.destroyed||!a.params.virtual||a.params.virtual&&!a.params.virtual.enabled||(a.updateSlides(),a.updateProgress(),a.updateSlidesClasses(),a.parallax&&a.params.parallax&&a.params.parallax.enabled&&a.parallax.setTranslate())};function ae(){return ae=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(a[s]=n[s])}return a},ae.apply(this,arguments)}function be(a){return a.type&&a.type.displayName&&a.type.displayName.includes("SwiperSlide")}function xe(a){const t=[];return A.Children.toArray(a).forEach(n=>{be(n)?t.push(n):n.props&&n.props.children&&xe(n.props.children).forEach(s=>t.push(s))}),t}function De(a){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return A.Children.toArray(a).forEach(s=>{if(be(s))t.push(s);else if(s.props&&s.props.slot&&n[s.props.slot])n[s.props.slot].push(s);else if(s.props&&s.props.children){const b=xe(s.props.children);b.length>0?b.forEach(d=>t.push(d)):n["container-end"].push(s)}else n["container-end"].push(s)}),{slides:t,slots:n}}function Me(a,t,n){if(!n)return null;const s=m=>{let w=m;return m<0?w=t.length+m:w>=t.length&&(w=w-t.length),w},b=a.isHorizontal()?{[a.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:d,to:h}=n,v=a.params.loop?-t.length:0,l=a.params.loop?t.length*2:t.length,P=[];for(let m=v;m<l;m+=1)m>=d&&m<=h&&P.push(t[s(m)]);return P.map((m,w)=>A.cloneElement(m,{swiper:a,style:b,key:`slide-${w}`}))}function Z(a,t){return typeof window>"u"?x.useEffect(a,t):x.useLayoutEffect(a,t)}const ce=x.createContext(null),qe=x.createContext(null),ie=x.forwardRef(function(a,t){let{className:n,tag:s="div",wrapperTag:b="div",children:d,onSwiper:h,...v}=a===void 0?{}:a,l=!1;const[P,m]=x.useState("swiper"),[w,y]=x.useState(null),[S,$]=x.useState(!1),p=x.useRef(!1),u=x.useRef(null),i=x.useRef(null),j=x.useRef(null),E=x.useRef(null),g=x.useRef(null),N=x.useRef(null),C=x.useRef(null),k=x.useRef(null),{params:B,passedParams:r,rest:I,events:M}=Be(v),{slides:z,slots:W}=De(d),X=()=>{$(!S)};Object.assign(B.on,{_containerClasses(T,D){m(D)}});const Y=()=>{Object.assign(B.on,M),l=!0;const T={...B};if(delete T.wrapperClass,i.current=new Pe(T),i.current.virtual&&i.current.params.virtual.enabled){i.current.virtual.slides=z;const D={cache:!1,slides:z,renderExternal:y,renderExternalUpdate:!1};H(i.current.params.virtual,D),H(i.current.originalParams.virtual,D)}};u.current||Y(),i.current&&i.current.on("_beforeBreakpoint",X);const re=()=>{l||!M||!i.current||Object.keys(M).forEach(T=>{i.current.on(T,M[T])})},ne=()=>{!M||!i.current||Object.keys(M).forEach(T=>{i.current.off(T,M[T])})};x.useEffect(()=>()=>{i.current&&i.current.off("_beforeBreakpoint",X)}),x.useEffect(()=>{!p.current&&i.current&&(i.current.emitSlidesClasses(),p.current=!0)}),Z(()=>{if(t&&(t.current=u.current),!!u.current)return i.current.destroyed&&Y(),Te({el:u.current,nextEl:g.current,prevEl:N.current,paginationEl:C.current,scrollbarEl:k.current,swiper:i.current},B),h&&h(i.current),()=>{i.current&&!i.current.destroyed&&i.current.destroy(!0,!1)}},[]),Z(()=>{re();const T=ze(r,j.current,z,E.current,D=>D.key);return j.current=r,E.current=z,T.length&&i.current&&!i.current.destroyed&&Ae({swiper:i.current,slides:z,passedParams:r,changedParams:T,nextEl:g.current,prevEl:N.current,scrollbarEl:k.current,paginationEl:C.current}),()=>{ne()}}),Z(()=>{Re(i.current)},[w]);function se(){return B.virtual?Me(i.current,z,w):z.map((T,D)=>A.cloneElement(T,{swiper:i.current,swiperSlideIndex:D}))}return A.createElement(s,ae({ref:u,className:ge(`${P}${n?` ${n}`:""}`)},I),A.createElement(qe.Provider,{value:i.current},W["container-start"],A.createElement(b,{className:Oe(B.wrapperClass)},W["wrapper-start"],se(),W["wrapper-end"]),pe(B)&&A.createElement(A.Fragment,null,A.createElement("div",{ref:N,className:"swiper-button-prev"}),A.createElement("div",{ref:g,className:"swiper-button-next"})),me(B)&&A.createElement("div",{ref:k,className:"swiper-scrollbar"}),fe(B)&&A.createElement("div",{ref:C,className:"swiper-pagination"}),W["container-end"]))});ie.displayName="Swiper";const Q=x.forwardRef(function(a,t){let{tag:n="div",children:s,className:b="",swiper:d,zoom:h,lazy:v,virtualIndex:l,swiperSlideIndex:P,...m}=a===void 0?{}:a;const w=x.useRef(null),[y,S]=x.useState("swiper-slide"),[$,p]=x.useState(!1);function u(g,N,C){N===w.current&&S(C)}Z(()=>{if(typeof P<"u"&&(w.current.swiperSlideIndex=P),t&&(t.current=w.current),!(!w.current||!d)){if(d.destroyed){y!=="swiper-slide"&&S("swiper-slide");return}return d.on("_slideClass",u),()=>{d&&d.off("_slideClass",u)}}}),Z(()=>{d&&w.current&&!d.destroyed&&S(d.getSlideClasses(w.current))},[d]);const i={isActive:y.indexOf("swiper-slide-active")>=0,isVisible:y.indexOf("swiper-slide-visible")>=0,isPrev:y.indexOf("swiper-slide-prev")>=0,isNext:y.indexOf("swiper-slide-next")>=0},j=()=>typeof s=="function"?s(i):s,E=()=>{p(!0)};return A.createElement(n,ae({ref:w,className:ge(`${y}${b?` ${b}`:""}`),"data-swiper-slide-index":l,onLoad:E},m),h&&A.createElement(ce.Provider,{value:i},A.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof h=="number"?h:void 0},j(),v&&!$&&A.createElement("div",{className:"swiper-lazy-preloader"}))),!h&&A.createElement(ce.Provider,{value:i},j(),v&&!$&&A.createElement("div",{className:"swiper-lazy-preloader"})))});Q.displayName="SwiperSlide";function Ue(a){let{swiper:t,extendParams:n,on:s,emit:b}=a;n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};const d=p=>(Array.isArray(p)?p:[p]).filter(u=>!!u);function h(p){let u;return p&&typeof p=="string"&&t.isElement&&(u=t.el.querySelector(p),u)?u:(p&&(typeof p=="string"&&(u=[...document.querySelectorAll(p)]),t.params.uniqueNavElements&&typeof p=="string"&&u.length>1&&t.el.querySelectorAll(p).length===1&&(u=t.el.querySelector(p))),p&&!u?p:u)}function v(p,u){const i=t.params.navigation;p=d(p),p.forEach(j=>{j&&(j.classList[u?"add":"remove"](...i.disabledClass.split(" ")),j.tagName==="BUTTON"&&(j.disabled=u),t.params.watchOverflow&&t.enabled&&j.classList[t.isLocked?"add":"remove"](i.lockClass))})}function l(){const{nextEl:p,prevEl:u}=t.navigation;if(t.params.loop){v(u,!1),v(p,!1);return}v(u,t.isBeginning&&!t.params.rewind),v(p,t.isEnd&&!t.params.rewind)}function P(p){p.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),b("navigationPrev"))}function m(p){p.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),b("navigationNext"))}function w(){const p=t.params.navigation;if(t.params.navigation=ke(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(p.nextEl||p.prevEl))return;let u=h(p.nextEl),i=h(p.prevEl);Object.assign(t.navigation,{nextEl:u,prevEl:i}),u=d(u),i=d(i);const j=(E,g)=>{E&&E.addEventListener("click",g==="next"?m:P),!t.enabled&&E&&E.classList.add(...p.lockClass.split(" "))};u.forEach(E=>j(E,"next")),i.forEach(E=>j(E,"prev"))}function y(){let{nextEl:p,prevEl:u}=t.navigation;p=d(p),u=d(u);const i=(j,E)=>{j.removeEventListener("click",E==="next"?m:P),j.classList.remove(...t.params.navigation.disabledClass.split(" "))};p.forEach(j=>i(j,"next")),u.forEach(j=>i(j,"prev"))}s("init",()=>{t.params.navigation.enabled===!1?$():(w(),l())}),s("toEdge fromEdge lock unlock",()=>{l()}),s("destroy",()=>{y()}),s("enable disable",()=>{let{nextEl:p,prevEl:u}=t.navigation;if(p=d(p),u=d(u),t.enabled){l();return}[...p,...u].filter(i=>!!i).forEach(i=>i.classList.add(t.params.navigation.lockClass))}),s("click",(p,u)=>{let{nextEl:i,prevEl:j}=t.navigation;i=d(i),j=d(j);const E=u.target;if(t.params.navigation.hideOnClick&&!j.includes(E)&&!i.includes(E)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===E||t.pagination.el.contains(E)))return;let g;i.length?g=i[0].classList.contains(t.params.navigation.hiddenClass):j.length&&(g=j[0].classList.contains(t.params.navigation.hiddenClass)),b(g===!0?"navigationShow":"navigationHide"),[...i,...j].filter(N=>!!N).forEach(N=>N.classList.toggle(t.params.navigation.hiddenClass))}});const S=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),w(),l()},$=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),y()};Object.assign(t.navigation,{enable:S,disable:$,update:l,init:w,destroy:y})}const Fe=({item:a,getImageUrl:t})=>{const[n,s]=x.useState(null),b=1+(a.imagenes?.length||0);return x.useEffect(()=>{n&&n.update()},[a,n]),b<=1?e.jsx("img",{src:t(a.imagen_principal),alt:a.nombre_producto||"Blog",className:"w-full max-w-[120px] h-20 object-cover rounded-lg shadow-md"}):e.jsxs(ie,{onSwiper:s,modules:[de,Ie],spaceBetween:10,slidesPerView:1,loop:b>=3,rewind:b===2,speed:800,autoplay:{delay:2e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{clickable:!0},className:"w-full max-w-[120px] h-20 rounded-lg shadow-md",children:[e.jsx(Q,{children:e.jsx("img",{src:t(a.imagen_principal),alt:a.nombre_producto||"Blog",className:"w-full h-20 object-cover rounded-lg"})},`slide-principal-${a.id}`),a.imagenes?.map((d,h)=>e.jsx(Q,{children:e.jsx("img",{src:t(d.ruta_imagen),alt:d.text_alt||"Imagen extra",className:"w-full h-20 object-cover rounded-lg"})},`slide-${a.id}-${h}`))]})},at=()=>{const[a,t]=x.useState([]),[n,s]=x.useState(1),b=5,[d,h]=x.useState({current_page:1,last_page:1,per_page:b,total:0}),[v,l]=x.useState(null),[P,m]=x.useState(!0),[w,y]=x.useState(!1),{darkMode:S}=$e(),$=async(g=1)=>{m(!0);try{const N=localStorage.getItem("token"),C=await fetch(`${J(K.endpoints.blogs.list)}?page=${g}&per_page=${b}`,{headers:{Authorization:`Bearer ${N}`,Accept:"application/json"}});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const k=await C.json();k.success&&k.data&&Array.isArray(k.data.data)?(t(k.data.data),h({current_page:k.data.current_page??g,last_page:k.data.last_page,per_page:k.data.per_page,total:k.data.total})):t([])}catch(N){console.error("âŒ Error al cargar datos:",N),t([])}finally{m(!1)}};x.useEffect(()=>{$(n)},[n]);const p=g=>{g>=1&&g<=d.last_page&&s(g)},u=async g=>{const N=localStorage.getItem("token");if(window.confirm("Â¿EstÃ¡s seguro de que deseas eliminar este blog?"))try{const k=await fetch(J(K.endpoints.blogs.delete(g)),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N}`}});if(k.ok)$(n),alert("âœ… Blog eliminado exitosamente");else{const B=await k.json().catch(()=>({}));alert(`âŒ Error al eliminar el blog: ${B.message||"Error desconocido"}`)}}catch{alert("âŒ Error al conectar con el servidor")}},i=g=>g?g.startsWith("http")?g:`https://apiyuntas.yuntaspublicidad.com${g}`:"/placeholder-image.jpg",j=(g,N=50)=>g?g.length>N?g.substring(0,N)+"...":g:"",E=()=>{l(null),y(!0)};return e.jsxs("div",{className:"overflow-x-auto p-2 sm:p-4",children:[e.jsxs(Se,{tableType:"blogs",exportData:a,onAddNew:E,children:[e.jsx("thead",{className:"hidden md:table-header-group",children:e.jsx("tr",{className:"bg-blue-950 text-white",children:["ID","PRODUCTO","SUBTÃTULO","IMAGEN","FECHA","ACCIÃ“N"].map(g=>e.jsx("th",{className:`px-4 py-2 text-white uppercase text-xs font-bold rounded-md ${S?"bg-cyan-900":"bg-cyan-400"}`,children:g},g))})}),e.jsx("tbody",{children:P?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500 block md:table-cell",children:"Cargando blogs..."})}):a.length>0?a.map((g,N)=>(1+(g.imagenes?.length||0),e.jsxs("tr",{className:`md:table-row block md:mb-0 mb-6 rounded-xl shadow-md overflow-hidden border ${N%2===0&&S?"bg-white text-black":"text-black bg-white"}`,children:[e.jsx("td",{"data-label":"ID",className:`block md:table-cell px-4 py-2 border-b font-bold before:content-['ID'] before:font-semibold before:block md:before:hidden ${S?"bg-gray-300":""}`,children:g.id}),e.jsx("td",{"data-label":"Producto",className:`block md:table-cell px-4 py-2 border-b font-semibold before:content-['Producto'] before:font-semibold before:block md:before:hidden ${S?"bg-gray-300":""}`,children:j(g.nombre_producto||"Sin nombre",30)}),e.jsx("td",{"data-label":"SubtÃ­tulo",className:`block md:table-cell px-4 py-2 border-b before:content-['SubtÃ­tulo'] before:font-semibold before:block md:before:hidden ${S?"bg-gray-300":""}`,children:j(g.subtitulo,40)}),e.jsxs("td",{"data-label":"Imagen",className:`block md:table-cell px-4 py-2 border-b border-gray-200 relative md:static before:content-['Imagen'] before:font-semibold before:block md:before:hidden ${S?"bg-gray-300":""}`,children:[e.jsx("div",{className:"block md:hidden w-full",children:e.jsxs(ie,{modules:[Ue,de],spaceBetween:10,slidesPerView:1,pagination:{clickable:!0},navigation:!0,className:"w-full max-w-[320px] rounded-lg shadow-md",children:[e.jsx(Q,{children:e.jsx("img",{src:i(g.imagen_principal),alt:g.nombre_producto||"Blog",className:"w-full h-48 object-cover rounded-lg"})}),g.imagenes?.map((C,k)=>e.jsx(Q,{children:e.jsx("img",{src:i(C.ruta_imagen),alt:C.text_alt||"Imagen extra",className:"w-full h-48 object-cover rounded-lg"})},k))]})}),e.jsx("div",{className:"hidden md:block w-full",children:e.jsx(Fe,{item:g,getImageUrl:i},g.id)})]}),e.jsx("td",{"data-label":"Fecha",className:`block md:table-cell px-4 py-2 border-b text-sm before:content-['Fecha'] before:font-semibold before:block md:before:hidden ${S?"bg-gray-300":""}`,children:g.created_at?new Date(g.created_at).toLocaleDateString("es-ES"):"N/A"}),e.jsx("td",{"data-label":"AcciÃ³n",className:`block md:table-cell px-4 py-3 border-b before:content-['AcciÃ³n'] before:font-semibold before:block md:before:hidden ${S?"bg-gray-300":""}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 mt-2 sm:mt-0",children:[e.jsxs("button",{className:"flex items-center justify-center gap-2 p-2 text-red-600 hover:text-red-800 transition bg-red-100 rounded-lg shadow-sm",title:"Eliminar",onClick:()=>u(g.id),children:[e.jsx(Ee,{size:18}),e.jsx("span",{className:"md:hidden font-medium",children:"Borrar"})]}),e.jsxs("button",{className:"flex items-center justify-center gap-2 p-2 text-yellow-600 hover:text-yellow-800 transition bg-yellow-100 rounded-lg shadow-sm",title:"Editar",onClick:()=>{l(g),y(!0)},children:[e.jsx(Ne,{size:18}),e.jsx("span",{className:"md:hidden font-medium",children:"Editar"})]})]})})]},g.id))):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No hay blogs disponibles"})})})]}),d.last_page>1&&e.jsxs("div",{className:"flex flex-wrap justify-center items-center mt-4 gap-2",children:[e.jsx("button",{onClick:()=>p(n-1),disabled:n===1,className:"px-4 py-2 bg-blue-950 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-800 transition-colors",children:"Anterior"}),Array.from({length:d.last_page},(g,N)=>{const C=N+1;return e.jsx("button",{onClick:()=>p(C),className:`px-3 py-2 rounded-md ${n===C?"bg-blue-950 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:C},C)}),e.jsx("button",{onClick:()=>p(n+1),disabled:n===d.last_page,className:"px-4 py-2 bg-blue-950 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-800 transition-colors",children:"Siguiente"})]}),e.jsx("button",{onClick:E,className:"mt-4 mb-6 bg-blue-950 hover:bg-blue-800 text-white text-lg px-8 sm:px-10 py-2 rounded-full w-full sm:w-auto",children:"AÃ±adir Blog"}),e.jsx(Le,{isOpen:w,setIsOpen:y,blogToEdit:v,onSuccess:()=>{l(null),y(!1),$(n)}})]})};export{at as default};
