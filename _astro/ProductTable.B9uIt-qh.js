import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{i as G,j as H,c as Q,d as Y,k as Z}from"./index.GK1F2SJ7.js";import{r as x}from"./index.Be8AcK8B.js";import{S as E}from"./sweetalert2.esm.all.Bj_ZQUAw.js";import{g as T,c as k}from"./config.CelHcebK.js";import{T as ee}from"./TableContainer.C49vMdQY.js";import{h as L}from"./httpService.CT4lg0D-.js";import{u as re}from"./useDarkMode.C4HGFL6C.js";import"./iconBase.Db4UJpFa.js";const z=({children:i,isOpen:u,onClose:a,title:p})=>u?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 overflow-y-auto",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 px-5 py-6 rounded-xl max-w-4xl w-full mx-4 my-10 shadow-lg",children:[p&&e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-white",children:p}),e.jsx("button",{onClick:a,className:"absolute top-4 right-5 text-gray-500 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white text-xl","aria-label":"Cerrar",children:"âœ•"}),e.jsx("div",{className:"overflow-y-auto max-h-[75vh] pr-2",children:i})]})}):null,q=i=>{const u=i.target.files?.[0];u&&u.size>2*1024*1024&&(E.fire({icon:"warning",title:"Â¡Imagen muy grande!",text:"MÃ¡x. 2 MB."}),i.target.value="")},te=({initialData:i,onSubmit:u,isEditing:a})=>{x.useEffect(()=>{if(i){console.log("Inicializando especificaciones y beneficios desde specs:",i.especificaciones);const l=i.especificaciones?Object.entries(i.especificaciones).filter(([c])=>c.startsWith("spec_")).map(([,c])=>String(c).trim()):[];S(l.length>0?l:[""]);const s=i.especificaciones?Object.entries(i.especificaciones).filter(([c])=>c.startsWith("beneficio_")).map(([,c])=>String(c).trim()):[];_(s.length>0?s:[""])}},[i]);const[p,P]=x.useState(i?.imagenes||[]),[b,C]=x.useState([]),[j,S]=x.useState((()=>{if(!i?.especificaciones)return[""];const l=Object.entries(i.especificaciones).filter(([s])=>s.startsWith("spec_")).map(([,s])=>String(s));return l.length>0?l:[""]})()),[g,_]=x.useState((()=>{if(!i?.especificaciones)return[""];const l=Object.entries(i.especificaciones).filter(([s])=>s.startsWith("beneficio_")).map(([,s])=>String(s));return l.length>0?l:[""]})()),[h,N]=x.useState(i?.etiqueta?.keywords||[""]),w=(l,s)=>{const c=[...h];c[l]=s,N(c)},y=()=>{h[h.length-1].trim()&&N([...h,""])},$=l=>{h.length>1&&N(h.filter((s,c)=>c!==l))},A=l=>{P(p.filter(s=>s.id!==l)),C([...b,l])},o=(l,s)=>{const c=[...j];c[l]=s,S(c)},t=()=>{j[j.length-1].trim()&&S([...j,""])},r=l=>{j.length>1&&S(j.filter((s,c)=>c!==l))},n=(l,s)=>{const c=[...g];c[l]=s,_(c)},d=()=>{g[g.length-1].trim()&&_([...g,""])},v=l=>{g.length>1&&_(g.filter((s,c)=>c!==l))},f=async l=>{l.preventDefault();const s=new FormData(l.currentTarget),c=new FormData;c.append("nombre",s.get("nombre")),c.append("link",s.get("link")),c.append("titulo",s.get("titulo_hero")),c.append("stock",s.get("stock"));const M=s.get("precio").replace("$","").trim();c.append("precio",M),c.append("subtitulo",s.get("nombre")),c.append("descripcion",s.get("descripcion_informacion")),c.append("seccion",s.get("seccion"));const B=s.get("imagen_lista_productos");B&&B.size>0&&c.append("imagen_principal",B);const O={};j.forEach((m,I)=>{m.trim()&&(O[`spec_${I+1}`]=m.trim())}),g.forEach((m,I)=>{m.trim()&&(O[`beneficio_${I+1}`]=m.trim())}),Object.keys(O).length>0&&Object.entries(O).forEach(([m,I])=>{c.append(`especificaciones[${m}]`,I)});const K=[{key:"imagen_hero",file:s.get("imagen_hero"),index:0},{key:"imagen_especificaciones",file:s.get("imagen_especificaciones"),index:1},{key:"imagen_beneficios",file:s.get("imagen_beneficios"),index:2},{key:"imagen_popups",file:s.get("imagen_popups"),index:3}];console.log("=== DEBUGGING IMÃGENES FRONTEND ===");let R=0;K.forEach(m=>{console.log(`Revisando imagen ${m.index} (${m.key}):`,{hasFile:m.file instanceof File,fileName:m.file?.name||"N/A",fileSize:m.file?.size||0,fileType:m.file?.type||"N/A"}),m.file&&m.file instanceof File&&m.file.size>0?(console.log(`âœ… Agregando imagen ${m.index}:`,m.key,m.file.name,`(${m.file.size} bytes)`),c.append(`imagenes[${m.index}]`,m.file),c.append(`imagen_tipos[${m.index}]`,m.key),R++):console.log(`âŒ Imagen ${m.index} (${m.key}) no tiene archivo vÃ¡lido o estÃ¡ vacÃ­a`);const I=s.get("meta_tÃ­tulo"),X=s.get("meta_descripcion");c.append("etiqueta[meta_titulo]",I.trim()),c.append("etiqueta[meta_descripcion]",X.trim());const U=h.filter(F=>F.trim()!=="");U.length>0&&U.forEach((F,J)=>{c.append(`etiqueta[keywords][${J}]`,F.trim())})}),console.log(`Total de imÃ¡genes enviadas: ${R}`),b.length>0&&b.forEach((m,I)=>{c.append(`imagenes_eliminar[${I}]`,m)});const W=s.get("meta_tÃ­tulo"),V=s.get("meta_descripcion");(W.trim()||V.trim())&&(c.append("etiqueta[meta_titulo]",W.trim()),c.append("etiqueta[meta_descripcion]",V.trim())),console.log("=== DATOS ENVIADOS AL BACKEND ==="),c.forEach((m,I)=>{m instanceof File?console.log(`Campo: ${I}, Archivo: ${m.name} (${m.size} bytes)`):console.log(`Campo: ${I}, Valor: ${m}`)}),a&&c.append("_method","PUT"),await u(c)};return e.jsxs("form",{id:"product-form",onSubmit:f,className:"space-y-8 max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4 flex items-center",children:"Datos para Dashboard (GestiÃ³n Interna)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nombre del Producto"," ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(Aparece en tabla)"})]}),e.jsx("input",{name:"nombre",defaultValue:i?.nombre||i?.titulo,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"MÃ¡x. 255 caracteres (letras, nÃºmeros y espacios)."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["SecciÃ³n/CategorÃ­a"," ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(Aparece en tabla)"})]}),e.jsx("input",{name:"seccion",defaultValue:i?.seccion,placeholder:"ej: Letreros LED, Sillas LED, Pisos LED, etc.",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"MÃ¡x. 255 caracteres (letras, nÃºmeros y espacios)."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Precio"," ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(Aparece en tabla)"})]}),e.jsx("input",{name:"precio",defaultValue:i?.precio?`$${i.precio}`:i?.precio,placeholder:"ej: $500.00",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Coloca el precio en nÃºmeros (mÃ¡x. 100 000)."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Link/URL"," ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(ej: letreros-neon-led)"})]}),e.jsx("input",{name:"link",defaultValue:i?.link||(i?.titulo?i.titulo.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]/g,""):""),placeholder:"letreros-neon-led",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Solo minÃºsculas y guiones. Hasta 255 letras, nÃºmeros o espacios."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Meta TÃ­tulo ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(SEO)"})]}),e.jsx("input",{name:"meta_tÃ­tulo",defaultValue:i?.etiqueta?.meta_titulo||"",placeholder:"TÃ­tulo para SEO del producto",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"MÃ¡x. 70 caracteres (letras, nÃºmeros y espacios)."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Meta DescripciÃ³n"," ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(SEO)"})]}),e.jsx("textarea",{name:"meta_descripcion",defaultValue:i?.etiqueta?.meta_descripcion||"",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"DescripciÃ³n breve del producto para SEO..."}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"MÃ¡x. 160 caracteres (letras, nÃºmeros y espacios)."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Keywords ",e.jsx("span",{className:"text-blue-600 text-sm",children:"(SEO)"})]}),e.jsx("div",{className:"space-y-2",children:h.map((l,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:c=>w(s,c.target.value),placeholder:"ej: letreros para negocio",className:"flex-1 mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),h.length>1&&e.jsx("button",{type:"button",onClick:()=>$(s),className:"text-red-500 hover:text-red-700 font-bold text-lg",children:"âœ•"})]},s))}),e.jsx("button",{type:"button",onClick:y,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium cursor-pointer",children:"+ Agregar keyword"}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Palabras clave relevantes para que los buscadores encuentren el producto."})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-4 flex items-center",children:"Datos para PÃ¡gina de Producto (Frontend)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["TÃ­tulo Hero"," ",e.jsx("span",{className:"text-green-600 text-sm",children:"(Aparece sobre la imagen principal)"})]}),e.jsx("input",{name:"titulo_hero",defaultValue:i?.titulo,placeholder:"ej: Letreros NeÃ³n LED",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"MÃ¡x. 255 caracteres (letras, nÃºmeros y espacios)."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["DescripciÃ³n"," ",e.jsx("span",{className:"text-green-600 text-sm",children:'(SecciÃ³n "InformaciÃ³n")'})]}),e.jsx("textarea",{rows:4,name:"descripcion_informacion",defaultValue:i?.descripcion,placeholder:"Describe el producto, sus usos y caracterÃ­sticas principales...",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-green-500 focus:border-green-500",required:!0}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"DescripciÃ³n detallada. 300-600 palabras."})]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg border border-purple-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-4 flex items-center",children:"Especificaciones (Checkmarks en el producto)"}),e.jsxs("div",{className:"space-y-3",children:[j.map((l,s)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"text",value:l,onChange:c=>o(s,c.target.value),placeholder:"ej: Materiales duraderos",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-purple-500 focus:border-purple-500"}),j.length>1&&e.jsx("button",{type:"button",onClick:()=>r(s),className:"text-red-500 hover:text-red-700 px-2 py-1",children:"âœ•"})]},s)),e.jsx("button",{type:"button",onClick:t,className:"text-purple-600 hover:text-purple-800 text-sm font-medium",children:"+ Agregar especificaciÃ³n"})]})]}),e.jsxs("div",{className:"bg-orange-50 p-6 rounded-lg border border-orange-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-800 mb-4 flex items-center",children:"Beneficios (Lista en el producto)"}),e.jsxs("div",{className:"space-y-3",children:[g.map((l,s)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"text",value:l,onChange:c=>n(s,c.target.value),placeholder:"ej: IluminaciÃ³n con colores vibrantes",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-orange-500 focus:border-orange-500"}),g.length>1&&e.jsx("button",{type:"button",onClick:()=>v(s),className:"text-red-500 hover:text-red-700 px-2 py-1",children:"âœ•"})]},s)),e.jsx("button",{type:"button",onClick:d,className:"text-orange-600 hover:text-orange-800 text-sm font-medium",children:"+ Agregar beneficio"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:"ImÃ¡genes del Producto (4 imÃ¡genes especÃ­ficas requeridas)"}),p.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"ImÃ¡genes actuales"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:p.map(l=>e.jsxs("div",{className:"flex flex-col items-center p-4 bg-white rounded-lg shadow-sm border hover:shadow-md transition",children:[e.jsx("img",{src:`${l.url_imagen}`,alt:l.texto_alt_SEO,className:"w-32 h-32 object-cover rounded-lg mb-2"}),e.jsx("span",{className:"text-center text-gray-700 text-sm mb-2",children:l.texto_alt_SEO}),e.jsx("button",{type:"button",onClick:()=>A(l.id),className:"bg-red-100 text-red-600 text-xs px-3 py-1 rounded-full hover:bg-red-200 transition",children:"Eliminar"})]},l.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"text-md font-semibold text-blue-700 mb-3",children:["Imagen para Lista de Productos"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:['Esta imagen aparece en la pÃ¡gina "Nuestros Productos" y es'," ",e.jsx("strong",{children:"obligatoria"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",name:"imagen_lista_productos",required:!a,className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:q}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Cada imagen debe pesar menos de 2 MB."}),e.jsx("input",{type:"text",name:"alt_imagen_lista",value:i?.text_alt_principal||"",placeholder:"Texto ALT para SEO",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:[e.jsxs("h4",{className:"text-md font-semibold text-green-700 mb-3",children:["ðŸŽ¯ Imagen Hero del Producto"," ",e.jsx("span",{className:"text-sm text-gray-500",children:"(Banner Principal)"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Imagen de fondo grande en la pÃ¡gina individual del producto -"," ",e.jsx("strong",{children:"Banner superior principal"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",name:"imagen_hero",className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100",onChange:q}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Cada imagen debe pesar menos de 2 MB."}),e.jsx("input",{type:"text",name:"alt_imagen_hero",value:i?.imagenes[0]?.texto_alt_SEO||"",placeholder:"Texto ALT para SEO",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-green-500 focus:border-green-500"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-purple-200",children:[e.jsxs("h4",{className:"text-md font-semibold text-purple-700 mb-3",children:["ðŸ“‹ Imagen para Especificaciones"," ",e.jsx("span",{className:"text-sm text-gray-500",children:"(SecciÃ³n Izquierda)"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Imagen que acompaÃ±a la secciÃ³n de especificaciones -"," ",e.jsx("strong",{children:"Lado izquierdo de la pÃ¡gina"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",name:"imagen_especificaciones",className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100",onChange:q}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Cada imagen debe pesar menos de 2 MB."}),e.jsx("input",{type:"text",name:"alt_imagen_especificaciones",value:i?.imagenes[1]?.texto_alt_SEO||"",placeholder:"Texto ALT para SEO",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-orange-200",children:[e.jsxs("h4",{className:"text-md font-semibold text-orange-700 mb-3",children:["ðŸŽ Imagen para Beneficios"," ",e.jsx("span",{className:"text-sm text-gray-500",children:"(SecciÃ³n Derecha)"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Imagen que acompaÃ±a la secciÃ³n de beneficios -"," ",e.jsx("strong",{children:"Lado derecho de la pÃ¡gina"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",name:"imagen_beneficios",className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100",onChange:q}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Cada imagen debe pesar menos de 2 MB."}),e.jsx("input",{type:"text",name:"alt_imagen_beneficios",value:i?.imagenes[2]?.texto_alt_SEO||"",placeholder:"Texto ALT para SEO",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"text-md font-semibold text-yellow-700 mb-3",children:"ðŸ’¬ Imagen para Popups"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Imagen que acompaÃ±a los popups de registro clientes"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",name:"imagen_popups",className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-yellow-50 file:text-yellow-700 hover:file:bg-yellow-100",onChange:q}),e.jsx("small",{className:"text-gray-500 block mt-1",children:"Cada imagen debe pesar menos de 2 MB."}),e.jsx("input",{type:"text",name:"alt_imagen_popups",value:i?.imagenes[3]?.texto_alt_SEO||"",placeholder:"Texto ALT para SEO",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-yellow-500 focus:border-yellow-500"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"ðŸ’¡ Estructura CORRECTA de imÃ¡genes:"}),e.jsx("br",{}),"ðŸ“¸ ",e.jsx("strong",{children:"Lista Productos:"})," Imagen para vista de catÃ¡logo (imagen_principal)",e.jsx("br",{}),"ðŸŽ¯ ",e.jsx("strong",{children:"Hero:"})," Banner principal superior (images[0])",e.jsx("br",{}),"ðŸ“‹ ",e.jsx("strong",{children:"Especificaciones:"})," AcompaÃ±a caracterÃ­sticas (images[1])",e.jsx("br",{}),"ðŸŽ ",e.jsx("strong",{children:"Beneficios:"})," AcompaÃ±a ventajas (images[2])",e.jsx("br",{}),"ðŸ’¬ ",e.jsx("strong",{children:"Popups:"})," AcompaÃ±a popups registro (images[3])"]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",className:"px-6 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:[a?"Actualizar":"Crear"," Producto"]})]})]})};function ae({onSubmit:i,plantillaId:u=null}){const[a,p]=x.useState(null),[P,b]=x.useState([]),[C,j]=x.useState(!1),[S,g]=x.useState([]),_=P.find(o=>o.id===a),h=Array.from({length:3},()=>({imagenPrincipal:null,vistaPreviaPrincipal:"",imagenSecundaria1:null,vistaPreviaSecundaria1:"",imagenSecundaria2:null,vistaPreviaSecundaria2:"",titulo:"",parrafo1:""}));x.useEffect(()=>{g(h)},[]),x.useEffect(()=>{if(a===null){g(h);return}(async()=>{try{j(!0);const t=localStorage.getItem("token"),r=await fetch(T(k.endpoints.emailProducto.plantillaPorProducto(a)),{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});if(r.status===404){alert("â„¹ï¸ El producto seleccionado no tiene una plantilla asociada."),g(h);return}if(!r.ok)throw new Error("Error al obtener plantilla");const n=await r.json();if(!n?.secciones||n.secciones.length===0){alert("â„¹ï¸ Este producto no tiene secciones configuradas en su plantilla."),g(h);return}const d=n.secciones.map(f=>({imagenPrincipal:null,vistaPreviaPrincipal:f.imagen_principal_url||"",imagenSecundaria1:null,vistaPreviaSecundaria1:f.imagen_secundaria1_url||"",imagenSecundaria2:null,vistaPreviaSecundaria2:f.imagen_secundaria2_url||"",titulo:f.titulo||"",subtitulo:f.subtitulo||"",parrafo1:f.parrafo1||""})),v=[...d,...Array(Math.max(0,3-d.length)).fill(h[0])];g(v)}catch(t){console.error("Error cargando plantilla del producto:",t),alert("âŒ OcurriÃ³ un error al cargar la plantilla del producto."),g(h)}finally{j(!1)}})()},[a]),x.useEffect(()=>{(async()=>{j(!0);try{const t=localStorage.getItem("token"),r=await fetch(T(k.endpoints.productos.all),{method:"GET",headers:{Authorization:`Bearer ${t}`,Accept:"application/json","Content-Type":"application/json"}});if(!r.ok)throw new Error(`Error HTTP: ${r.status}`);const n=await r.json();n.success&&Array.isArray(n.data)?b(n.data):Array.isArray(n)?b(n):b([])}catch(t){console.error("Error al obtener los productos:",t),b([]),alert("âŒ No se pudieron cargar los productos. Intenta nuevamente.")}finally{j(!1)}})()},[]);const N=(o,t,r)=>{const n=[...S];n[o][t]=r;const d=r?URL.createObjectURL(r):"";t==="imagenPrincipal"&&(n[o].vistaPreviaPrincipal=d),t==="imagenSecundaria1"&&(n[o].vistaPreviaSecundaria1=d),t==="imagenSecundaria2"&&(n[o].vistaPreviaSecundaria2=d),g(n)},w=(o,t,r)=>{const n=[...S];n[o][t]=r,g(n)},y=(o,t)=>N(o,t,null),$=async o=>{if(o.preventDefault(),a===null){alert("âš ï¸ Debes seleccionar un producto antes de continuar.");return}const t=new FormData;t.append("producto_id",String(a)),S.forEach((r,n)=>{r.imagenPrincipal&&t.append(`secciones[${n}][imagen_principal]`,r.imagenPrincipal),r.imagenSecundaria1&&t.append(`secciones[${n}][imagenes_secundarias][]`,r.imagenSecundaria1),r.imagenSecundaria2&&t.append(`secciones[${n}][imagenes_secundarias][]`,r.imagenSecundaria2),t.append(`secciones[${n}][titulo]`,r.titulo),t.append(`secciones[${n}][parrafo1]`,r.parrafo1)}),u!=null&&t.append("_method","PUT");try{await i(t)}catch(r){console.error("Error al enviar plantilla:",r),alert("âŒ No se pudo guardar la plantilla. Ver consola.")}},A=({emailIndex:o,tipoImagen:t,vistaPrevia:r,etiqueta:n})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n}),r?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r,alt:n,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-300"}),e.jsx("button",{type:"button",onClick:()=>y(o,t),className:"absolute top-2 right-2 bg-red-500 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(G,{size:12})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition",children:[e.jsx(H,{className:"text-gray-400 text-3xl mb-2"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Subir imagen"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:d=>{const v=d.target.files?.[0]||null;N(o,t,v)}})]})]});return e.jsxs("form",{onSubmit:$,className:"space-y-8 max-h-[70vh] overflow-y-auto px-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecciona un producto"}),e.jsxs("select",{value:a??"",onChange:o=>p(o.target.value?Number(o.target.value):null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"-- Elige un producto --"}),P.map(o=>e.jsx("option",{value:o.id,children:o.nombre},o.id))]}),C&&e.jsx("p",{className:"text-sm text-gray-400 italic mt-1",children:"Cargando..."}),!C&&P.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No hay productos disponibles."})]}),S.map((o,t)=>e.jsxs("div",{className:"p-6 bg-gradient-to-br from-red-50 to-indigo-50 rounded-xl shadow-md border border-red-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-[#c11319] mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"bg-[#c11319] text-white w-8 h-8 rounded-full flex items-center justify-center text-sm",children:t+1}),_?e.jsx("span",{children:_.nombre}):e.jsxs("span",{children:["SecciÃ³n Email ",t+1]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{emailIndex:t,tipoImagen:"imagenPrincipal",vistaPrevia:o.vistaPreviaPrincipal,etiqueta:"Imagen Principal"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(A,{emailIndex:t,tipoImagen:"imagenSecundaria1",vistaPrevia:o.vistaPreviaSecundaria1,etiqueta:"Imagen Secundaria 1"}),e.jsx(A,{emailIndex:t,tipoImagen:"imagenSecundaria2",vistaPrevia:o.vistaPreviaSecundaria2,etiqueta:"Imagen Secundaria 2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TÃ­tulo"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:o.titulo,onChange:r=>w(t,"titulo",r.target.value),placeholder:"Escribe el tÃ­tulo aquÃ­"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PÃ¡rrafo 1"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:o.parrafo1,onChange:r=>w(t,"parrafo1",r.target.value),placeholder:"Escribe el pÃ¡rrafo aquÃ­",rows:3})]})]})]},t)),e.jsx("button",{type:"submit",className:"w-full bg-[#c11319] hover:bg-[#fbbc05] text-white font-bold py-3 rounded-lg transition",children:"Guardar plantilla"})]})}function se({onSubmit:i,plantillaId:u=null}){const[a,p]=x.useState(null),[P,b]=x.useState([]),[C,j]=x.useState(!1),[S,g]=x.useState([]),_=P.find(o=>o.id===a),h=Array.from({length:1},()=>({imagenPrincipal:null,vistaPreviaPrincipal:"",parrafo1:""}));x.useEffect(()=>{g(h)},[]),x.useEffect(()=>{if(a===null){g(h);return}(async()=>{try{j(!0);const t=localStorage.getItem("token"),r=await fetch(T(k.endpoints.whatsappProducto.get(a)),{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});if(r.status===404){g(h),E.fire({title:"Sin plantilla",text:"El producto no tiene plantillas asignadas.",icon:"info",confirmButtonText:"OK"});return}if(!r.ok)throw new Error("Error al obtener plantilla");const n=await r.json(),d=n?.data??n;console.log("DEBUG plantilla whatsapp d =>",d);const v=d?.parrafo1??d?.whatsapp_caption??d?.parrafo??d?.titulo??"",f=d?.whatsapp_image_url??d?.imagen_url??(d?.whatsapp_image?T(d.whatsapp_image):"")??"";g([{imagenPrincipal:null,vistaPreviaPrincipal:f,parrafo1:v}])}catch(t){console.error("Error cargando plantilla del producto:",t),alert("âŒ OcurriÃ³ un error al cargar la plantilla del producto."),g(h)}finally{j(!1)}})()},[a]),x.useEffect(()=>{(async()=>{j(!0);try{const t=localStorage.getItem("token"),r=await fetch(T(k.endpoints.productos.all),{method:"GET",headers:{Authorization:`Bearer ${t}`,Accept:"application/json","Content-Type":"application/json"}});if(!r.ok)throw new Error(`Error HTTP: ${r.status}`);const n=await r.json();n.success&&Array.isArray(n.data)?b(n.data):Array.isArray(n)?b(n):b([])}catch(t){console.error("Error al obtener los productos:",t),b([]),alert("âŒ No se pudieron cargar los productos. Intenta nuevamente.")}finally{j(!1)}})()},[]);const N=(o,t,r)=>{const n=[...S];n[o][t]=r;const d=r?URL.createObjectURL(r):"";t==="imagenPrincipal"&&(n[o].vistaPreviaPrincipal=d),g(n)},w=(o,t)=>{const r=[...S];r[o].parrafo1=t,g(r)},y=(o,t)=>N(o,t,null),$=async o=>{if(o.preventDefault(),a===null){alert("âš ï¸ Debes seleccionar un producto antes de continuar.");return}const t=new FormData;t.append("producto_id",String(a));const r=S[0];t.append("parrafo",r.parrafo1??""),r.imagenPrincipal?t.append("imagen_principal",r.imagenPrincipal):r.vistaPreviaPrincipal||t.append("eliminar_imagen","1"),u!=null&&t.append("_method","PUT");try{await i(t)}catch(n){console.error("Error al enviar plantilla:",n),alert("âŒ No se pudo guardar la plantilla. Ver consola.")}},A=({WhatsappIndex:o,tipoImagen:t,vistaPrevia:r,etiqueta:n})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n}),r?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r,alt:n,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-300"}),e.jsx("button",{type:"button",onClick:()=>y(o,t),className:"absolute top-2 right-2 bg-red-500 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(G,{size:12})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition",children:[e.jsx(H,{className:"text-gray-400 text-3xl mb-2"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Subir imagen"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:d=>{const v=d.target.files?.[0]||null;N(o,t,v)}})]})]});return e.jsxs("form",{onSubmit:$,className:"space-y-8 max-h-[70vh] overflow-y-auto px-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecciona un producto"}),e.jsxs("select",{value:a??"",onChange:o=>p(o.target.value?Number(o.target.value):null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"-- Elige un producto --"}),P.map(o=>e.jsx("option",{value:o.id,children:o.nombre},o.id))]}),C&&e.jsx("p",{className:"text-sm text-gray-400 italic mt-1",children:"Cargando..."}),!C&&P.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No hay productos disponibles."})]}),S.map((o,t)=>e.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-indigo-50 rounded-xl shadow-md border border-green-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-green-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"bg-green-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm",children:t+1}),_?e.jsx("span",{children:_.nombre}):e.jsx("span",{children:"SecciÃ³n Whatsapp "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{WhatsappIndex:t,tipoImagen:"imagenPrincipal",vistaPrevia:o.vistaPreviaPrincipal,etiqueta:"Imagen Principal"}),e.jsx("div",{}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PÃ¡rrafo"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:o.parrafo1,onChange:r=>w(t,r.target.value),placeholder:"Escribe el pÃ¡rrafo aquÃ­",rows:6})]})]})]},t)),e.jsx("button",{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition",children:"Guardar plantilla"})]})}class oe{async getAllProductos(u=1,a=6){try{const p=`${k.endpoints.productos.list}?page=${u}&perPage=${a}`,b=await(await fetch(k.apiUrl+p)).json();return console.log("response from getAllProductos2:",b),b}catch(p){throw console.error("[ProductoService] Error obteniendo productos:",p),p}}async getProductoById(u){try{return await L.get(k.endpoints.productos.detail(u))}catch(a){throw console.error("[ProductoService] Error obteniendo producto:",a),a}}async getProductoByLink(u){try{return await L.get(k.endpoints.productos.link(u))}catch(a){throw console.error("[ProductoService] Error obteniendo producto por link:",a),a}}async createProducto(u){try{const a=this.buildFormData(u);return await L.authenticatedPostFormData(k.endpoints.productos.create,a)}catch(a){throw console.error("[ProductoService] Error creando producto:",a),a}}async updateProducto(u,a){try{const p=this.buildFormData(a);return await L.authenticatedPutFormData(k.endpoints.productos.update(u),p)}catch(p){throw console.error("[ProductoService] Error actualizando producto:",p),p}}async deleteProducto(u){try{return await L.authenticatedDelete(k.endpoints.productos.delete(u))}catch(a){throw console.error("[ProductoService] Error eliminando producto:",a),a}}buildFormData(u){const a=new FormData;return a.append("link",u.link),a.append("nombre",u.nombre),a.append("titulo",u.titulo),a.append("descripcion",u.descripcion),a.append("seccion",u.seccion),(u.imagen_principal_file||u.imagen_principal_file)&&a.append("imagen_principal",u.imagen_principal_file),u.imagenes_files&&u.imagenes_files.forEach((p,P)=>{a.append(`imagenes[${P}]`,p)}),a}}const D=new oe;function ne(){const[i,u]=x.useState([]),[a,p]=x.useState(!0),[P,b]=x.useState(null),[C,j]=x.useState({current_page:1,last_page:1,per_page:6,total:0});console.log("PRODUCTOS HOOK:",i);const S=async(N=1,w=C.per_page)=>{p(!0),b(null);try{const y=await D.getAllProductos(N,w);console.log("response from getAllProductos:",y.data),u(y.data),j({current_page:y.current_page,last_page:y.last_page,per_page:y.per_page,total:y.total})}catch(y){b(y instanceof Error?y.message:"Error desconocido al obtener productos"),console.error("Error en useProducts:",y)}finally{p(!1)}},g=async(N,w)=>{await S(N,w)};return x.useEffect(()=>{S(C.current_page,C.per_page)},[]),{productos:i,loading:a,error:P,pagination:C,refetch:g,createProduct:async N=>{p(!0),b(null);try{const w=await D.createProducto(N);return g(C.current_page),w.data}catch(w){return b(w instanceof Error?w.message:"Error desconocido al crear producto"),console.error("Error al crear producto:",w),null}finally{p(!1)}},updateProduct:async(N,w)=>{p(!0),b(null);try{const y=await D.updateProducto(N,w);if(!y.data)throw new Error("Producto no encontrado");return u($=>$.map(A=>A.id===N?y.data:A)),y.data}catch(y){return b(y instanceof Error?y.message:"Error desconocido al actualizar producto"),console.error("Error al actualizar producto:",y),null}finally{p(!1)}}}}function fe(){const{productos:i,loading:u,pagination:a,refetch:p}=ne(),[P,b]=x.useState(!1),[C,j]=x.useState(!1),[S,g]=x.useState(!1),[_,h]=x.useState(void 0),{darkMode:N}=re(),w=async r=>{const n=T(k.endpoints.productos.create),d=localStorage.getItem("token");if(!d){E.fire("Error","No hay token de autenticaciÃ³n. Por favor inicia sesiÃ³n.","error");return}try{const v=_?T(k.endpoints.productos.update(_.id)):n,f=await fetch(v,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${d}`,"X-Requested-With":"XMLHttpRequest"},body:r}),l=await f.json();if(f.ok)E.fire({title:l.message||"Producto guardado exitosamente",icon:"success"}),b(!1),p(a.current_page);else{let s=l.message||"Error desconocido";f.status===401?(s="Token expirado o invÃ¡lido. Por favor inicia sesiÃ³n nuevamente.",localStorage.removeItem("token")):f.status===403?s="Acceso denegado. Permisos insuficientes.":f.status===422&&(s="Datos invÃ¡lidos: "+l.message),E.fire("Error",s,"error")}}catch{E.fire("Error","Hubo un error al insertar el producto","error")}},y=async r=>{const n=localStorage.getItem("token");if(!n){E.fire("Error","No hay token de autenticaciÃ³n. Por favor inicia sesiÃ³n.","error");return}const d=T(k.endpoints.emailProducto.create);try{const v=await fetch(d,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${n}`},body:r}),f=await v.json();if(v.ok)E.fire({title:f.message||"Email enviado con Ã©xito",icon:"success"}),j(!1);else{let l=f.message||"Error al enviar email";v.status===401?(l="Token expirado o invÃ¡lido. Por favor inicia sesiÃ³n nuevamente.",localStorage.removeItem("token")):v.status===422&&(l="Datos invÃ¡lidos: "+f.message),E.fire("Error",l,"error")}}catch{E.fire("Error","No se pudo conectar con el servidor.","error")}},$=async r=>{const n=localStorage.getItem("token");if(!n){E.fire("Error","No hay token de autenticaciÃ³n. Por favor inicia sesiÃ³n.","error");return}const d=r.get("producto_id")??r.get("productoId"),v=Number(d);if(!v||Number.isNaN(v)){E.fire("Error","Falta seleccionar el producto.","error");return}const f=T(k.endpoints.whatsappProducto.create(v));try{const l=await fetch(f,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${n}`},body:r}),s=await l.json().catch(()=>({}));if(l.ok)E.fire({title:s.message||"Plantilla WhatsApp guardada",icon:"success"}),g(!1);else{let c=s.message||"Error al guardar la plantilla";if(l.status===401)c="Token expirado o invÃ¡lido. Por favor inicia sesiÃ³n nuevamente.",localStorage.removeItem("token");else if(l.status===422&&s?.errors){const M=Object.entries(s.errors).map(([B,O])=>`${B}: ${O?.[0]??O}`).join(`
`);M&&(c=`Datos invÃ¡lidos:
${M}`)}E.fire("Error",c,"error")}}catch{E.fire("Error","No se pudo conectar con el servidor.","error")}},A=async r=>{const n=T(k.endpoints.productos.delete(r)),d=localStorage.getItem("token");if(!d){E.fire({title:"Error de autenticaciÃ³n",text:"No se encontrÃ³ token de acceso. Por favor inicia sesiÃ³n nuevamente.",icon:"error",confirmButtonText:"Entendido"});return}if((await E.fire({title:"Â¿EstÃ¡s seguro?",text:"Â¡Esta acciÃ³n no se puede deshacer!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"SÃ­, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{const f=await fetch(n,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${d}`,"X-Requested-With":"XMLHttpRequest"}}),l=await f.json();if(f.ok)E.fire("Â¡Eliminado!",l.message,"success"),p(a.current_page);else{let s=l.message||"Error desconocido al eliminar";f.status===401?(s="Token expirado o invÃ¡lido. Por favor inicia sesiÃ³n nuevamente.",localStorage.removeItem("token")):f.status===403?s="Acceso denegado. No tienes permisos para eliminar productos.":f.status===404&&(s="El producto no existe o ya fue eliminado."),E.fire("Error",s,"error")}}catch{E.fire("Error","No se pudo conectar con el servidor.","error")}},o=r=>{p(r,a.per_page)},t=r=>{h(r),b(!0)};return x.useEffect(()=>(document.body.style.overflow=P?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[P]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row gap-4 mb-4",children:[e.jsx("button",{onClick:()=>{h(void 0),b(!0)},className:"mt-4 bg-blue-950 hover:bg-blue-800 text-white text-lg px-10 py-1.5 rounded-full flex items-center gap-2",children:"AÃ±adir Producto"}),e.jsx("button",{onClick:()=>j(!0),className:"mt-4 bg-[#bb001b] hover:bg-[#fbbc05] text-white text-lg px-10 py-1.5 rounded-full flex items-center gap-2",children:"EnvÃ­o de Emails"}),e.jsx("button",{onClick:()=>g(!0),className:"mt-4 bg-green-700 hover:bg-green-600 text-white text-lg px-10 py-1.5 rounded-full flex items-center gap-2",children:"EnvÃ­o de Whatsapp"})]}),e.jsx("div",{className:"overflow-x-auto p-4",children:e.jsxs(ee,{tableType:"productos",children:[e.jsx("thead",{className:"hidden md:table-header-group",children:e.jsx("tr",{children:["ID","Nombre","SecciÃ³n","Precio","AcciÃ³n"].map(r=>e.jsx("th",{className:`px-4 py-2 text-white uppercase text-xs font-bold rounded-md ${N?"bg-cyan-900":"bg-cyan-400"}`,children:r},r))})}),e.jsx("tbody",{children:u?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-12",children:e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-teal-500"}),e.jsx("span",{className:"text-teal-500 font-medium",children:"Cargando productos..."})]})})}):i.length>0?i.map((r,n)=>{const d=n%2===0&&N?"bg-white text-black":"text-black bg-white",v=r.id??`producto-${n}`;return e.jsxs("tr",{className:`text-center md:table-row block md:mb-0 mb-4 rounded-lg shadow-sm ${d}`,children:[e.jsx("td",{className:"px-4 py-2 border",children:r.id}),e.jsx("td",{className:"px-4 py-2 border",children:r.nombre}),e.jsx("td",{className:"px-4 py-2 border",children:r.seccion}),e.jsxs("td",{className:"px-4 py-2 border",children:["$",r.precio?.toFixed(2)]}),e.jsx("td",{className:"px-4 py-2 border",children:e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>t(r),className:"p-2 text-yellow-600 hover:text-yellow-800 bg-yellow-100 rounded-lg shadow-sm",title:"Editar",children:e.jsx(Q,{size:18})}),e.jsx("button",{onClick:()=>A(r.id),className:"p-2 text-red-600 hover:text-red-800 bg-red-100 rounded-lg shadow-sm",title:"Eliminar",children:e.jsx(Y,{size:18})})]})})]},v)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-16 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"bg-teal-50 p-6 rounded-full",children:e.jsx(Z,{className:"h-10 w-10 text-teal-300"})}),e.jsx("p",{className:"text-xl font-medium text-gray-600 mt-4",children:"No hay productos registrados"}),e.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:"Comienza agregando productos a tu catÃ¡logo con el botÃ³n 'AÃ±adir Producto'"})]})})})})]})}),a.last_page>1&&e.jsxs("div",{className:"flex justify-center items-center mt-4 gap-2",children:[e.jsx("button",{onClick:()=>o(a.current_page-1),disabled:a.current_page===1,className:"px-4 py-2 bg-blue-950 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:a.last_page},(r,n)=>{const d=n+1;return e.jsx("button",{onClick:()=>o(d),className:`px-3 py-2 rounded-md ${a.current_page===d?"bg-blue-950 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:d},d)})}),e.jsx("button",{onClick:()=>o(a.current_page+1),disabled:a.current_page===a.last_page,className:"px-4 py-2 bg-blue-950 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]}),e.jsx(z,{isOpen:P,onClose:()=>{b(!1),h(void 0)},title:_?"Editar Datos":"Ingresar Datos",children:e.jsx(te,{initialData:_,onSubmit:w,isEditing:!!_})}),e.jsx(z,{isOpen:C,onClose:()=>j(!1),title:"Envio de Emails",children:e.jsx(ae,{onSubmit:y})}),e.jsx(z,{isOpen:S,onClose:()=>g(!1),title:"Envio de Whatsapp",children:e.jsx(se,{onSubmit:$})})]})}export{fe as default};
