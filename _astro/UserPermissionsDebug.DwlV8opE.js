import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.ai7qpRr1.js";function x(){const[r,c]=i.useState(null),[m,n]=i.useState(!0),[d,l]=i.useState(null);return i.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("token");if(!s){l("No hay token de autenticaci√≥n"),n(!1);return}console.log("üîç Verificando permisos del usuario...");const a=await fetch("https://apiyuntas.yuntaspublicidad.com/api/v1/me",{method:"GET",headers:{Authorization:`Bearer ${s}`,Accept:"application/json","Content-Type":"application/json"}});if(console.log("üì° Response status:",a.status),a.status===401){l("Token expirado o inv√°lido"),n(!1);return}if(a.ok){const t=await a.json();console.log("üë§ User data:",t),c(t)}else{const t=await fetch("https://apiyuntas.yuntaspublicidad.com/api/user",{method:"GET",headers:{Authorization:`Bearer ${s}`,Accept:"application/json","Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${a.status}`);const h=await t.json();console.log("üë§ User data:",h),c(h)}}catch(s){console.error("‚ùå Error:",s),l(s instanceof Error?s.message:"Error desconocido")}finally{n(!1)}})()},[]),m?e.jsx("div",{className:"p-4 bg-blue-100 border border-blue-400 rounded",children:e.jsx("p",{className:"text-blue-800",children:"üîç Verificando permisos del usuario..."})}):d?e.jsxs("div",{className:"p-4 bg-red-100 border border-red-400 rounded",children:[e.jsx("h3",{className:"font-bold text-red-800",children:"‚ùå Error"}),e.jsx("p",{className:"text-red-700",children:d})]}):e.jsxs("div",{className:"p-4 bg-white border border-gray-300 rounded shadow",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"üîê Informaci√≥n de Permisos"}),r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:"üë§ Usuario:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",r.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",r.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",r.email]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:"üé≠ Roles:"}),r.roles&&r.roles.length>0?e.jsx("ul",{className:"list-disc pl-5",children:r.roles.map((o,s)=>e.jsx("li",{className:"text-blue-600",children:o},s))}):e.jsx("p",{className:"text-red-600",children:"‚ùå Sin roles asignados"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:"üîë Permisos:"}),r.permissions&&r.permissions.length>0?e.jsx("ul",{className:"list-disc pl-5",children:r.permissions.map((o,s)=>e.jsxs("li",{className:o==="ENVIAR"?"text-green-600 font-bold":"text-gray-600",children:[o,o==="ENVIAR"&&"  (Requerido para productos)"]},s))}):e.jsx("p",{className:"text-red-600",children:"‚ùå Sin permisos asignados"})]}),e.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 rounded p-3",children:[e.jsx("h5",{className:"font-semibold text-yellow-800",children:"üìã Permisos requeridos para productos:"}),e.jsxs("ul",{className:"text-yellow-700",children:[e.jsx("li",{children:"‚Ä¢ Rol: ADMIN o USER"}),e.jsx("li",{children:"‚Ä¢ Permiso: ENVIAR"})]})]})]}):e.jsx("p",{className:"text-gray-600",children:"No se pudo obtener informaci√≥n del usuario"})]})}export{x as default};
