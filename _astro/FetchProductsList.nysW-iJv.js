import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as c}from"./index.ai7qpRr1.js";import{b as $,g as E}from"./imageHelpers.2wvKHwk-.js";const F=({producto:n})=>{console.log("üé¥ ProductCard recibi√≥ producto:",n);const u=$(n.imagen_principal),i=n.text_alt_principal||"Imagen del producto",d=n.title||n.titulo||n.nombre||"Producto sin t√≠tulo",l=n.link;return console.log("üñºÔ∏è Imagen URL calculada:",u),console.log("üìù T√≠tulo calculado:",d),console.log("üîó Link del producto:",l),e.jsxs("a",{href:`/products/${l}`,className:"relative flex flex-col items-center hover:scale-105 transition-all duration-200 cursor-pointer group mb-8",title:d,children:[e.jsx("div",{className:"relative w-[280px] bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl overflow-hidden border border-gray-700",children:e.jsx("div",{className:"h-[200px] w-[280px] overflow-hidden",children:u?e.jsx("img",{className:"w-full h-full object-cover object-center",src:u,alt:i,title:E(u,d),loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center",children:e.jsx("p",{className:"text-white text-xl font-bold",children:"Sin imagen"})})})}),e.jsx("div",{className:"p-4 mt-2",children:e.jsx("p",{className:"text-white text-center text-sm font-semibold leading-tight",children:d})})]})},I=({products:n,onFilteredProducts:u})=>{const[i,d]=c.useState(""),[l,m]=c.useState([]),[f,g]=c.useState(!1),w=c.useRef(null),N=()=>{const s=new Set;return n.forEach(o=>{const a=o.title||o.titulo||o.nombre||"";a.trim()&&s.add(a.trim())}),Array.from(s)},b=s=>{if(s.length===0)return[];const o=N(),a=s.toLowerCase();return o.filter(p=>p.toLowerCase().includes(a)).sort((p,y)=>{const r=p.toLowerCase(),t=y.toLowerCase();return r===a?-1:t===a?1:r.startsWith(a)&&!t.startsWith(a)?-1:t.startsWith(a)&&!r.startsWith(a)?1:r.indexOf(a)-t.indexOf(a)}).slice(0,6)},k=s=>{if(!s.trim())return n;const o=s.toLowerCase();return n.filter(a=>(a.title||a.titulo||a.nombre||"").toLowerCase().includes(o))};c.useEffect(()=>{const s=k(i);if(u(s),i.length>0){const o=b(i);m(o),g(o.length>0)}else m([]),g(!1)},[i,n]),c.useEffect(()=>{const s=o=>{w.current&&!w.current.contains(o.target)&&g(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const j=s=>{const o=s.target.value;d(o)},L=s=>{d(s),g(!1)},S=()=>{l.length>0&&i.length>0&&g(!0)},P=()=>{d(""),g(!1)};return e.jsxs("div",{className:"w-full mb-8",ref:w,children:[e.jsx("div",{className:"relative w-full mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:i,onChange:j,onFocus:S,placeholder:"Buscar productos...",className:"w-full bg-gradient-to-r from-gray-800 to-gray-900 border-2 border-gray-700 placeholder-gray-400 px-6 py-4 pr-16 rounded-2xl text-white text-xl focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/20 transition-all duration-300 shadow-xl"}),e.jsxs("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 flex items-center space-x-2",children:[i&&e.jsx("button",{onClick:P,className:"w-6 h-6 text-gray-400 hover:text-white transition-colors duration-200 hover:scale-110",title:"Limpiar b√∫squeda",children:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),f&&l.length>0&&e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-br from-gray-800 to-gray-900 border-2 border-gray-700 rounded-2xl shadow-2xl z-50 max-h-64 overflow-y-auto backdrop-blur-sm",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"text-xs text-cyan-400 px-4 py-2 font-bold uppercase tracking-wider border-b border-gray-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("span",{children:["Sugerencias (",l.length,")"]})]}),l.map((s,o)=>e.jsxs("button",{onClick:()=>L(s),className:"w-full text-left px-4 py-3 hover:bg-gray-700/50 rounded-xl text-white transition-all duration-200 flex items-center space-x-3 group hover:scale-[1.02] hover:border-l-2 hover:border-cyan-400",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400 group-hover:text-cyan-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{className:"text-sm font-medium group-hover:text-cyan-100 transition-colors",children:s})]},o))]})})})]})};function _(){const[n,u]=c.useState([]),[i,d]=c.useState([]),[l,m]=c.useState(1),[f,g]=c.useState(1),[w,N]=c.useState(!0),[b,k]=c.useState(!1),j=6;c.useEffect(()=>{(async()=>{N(!0);try{let t=[],h=1,x=!0;for(;x;){const A=`https://apiyuntas.yuntaspublicidad.com/api/v1/productos?page=${h}&per_page=50`,v=await(await fetch(A,{headers:{"Content-Type":"application/json",Accept:"application/json"}})).json();v&&Array.isArray(v.data)&&v.data.length>0?(t=[...t,...v.data],v.current_page<v.last_page?h++:x=!1):x=!1}console.log("Todos los productos obtenidos:",t.length),u(t),d(t),g(Math.ceil(t.length/j))}catch(t){console.error("Error fetching products:",t),u([]),d([])}finally{N(!1)}})()},[]);const L=r=>{d(r),k(r.length!==n.length||r.length===0&&n.length>0),m(1)},P=(()=>{if(b)return i;{const r=(l-1)*j,t=r+j;return i.slice(r,t)}})(),o=(r=>{const t=[];for(let h=0;h<r.length;h+=3)t.push(r.slice(h,h+3));return t})(P),a=()=>{l>1&&m(l-1)},C=()=>{l<f&&m(l+1)},p=l>1,y=l<f;return c.useEffect(()=>{b||g(Math.ceil(i.length/j))},[i,b]),w?e.jsx("div",{className:"grid place-content-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-b-2 border-cyan-400 mb-4"}),e.jsx("p",{className:"text-white text-2xl font-bold animate-pulse",children:"Cargando productos..."})]})}):e.jsx("div",{className:"w-full",children:n.length>0?e.jsxs(e.Fragment,{children:[e.jsx(I,{products:n,onFilteredProducts:L}),P.length>0?e.jsx("div",{className:"space-y-8 mb-12",children:o.map((r,t)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 px-4 mb-4",children:[r.map((h,x)=>e.jsx("div",{className:"flex justify-center",children:e.jsx(F,{producto:h})},`${t}-${x}-${h.id||h.title||x}`)),r.length<3&&Array.from({length:3-r.length}).map((h,x)=>e.jsx("div",{className:"invisible",children:e.jsx("div",{className:"w-[280px] h-[200px]"})},`empty-${t}-${x}`))]}),e.jsx("div",{className:"w-full h-[2px] bg-gradient-to-r from-transparent via-cyan-400 to-transparent"})]},t))}):e.jsx("div",{className:"text-white text-center py-16",children:e.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-12 max-w-lg mx-auto",children:[e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"No se encontraron productos"}),e.jsxs("p",{className:"text-gray-300 text-lg",children:["Intenta con otros t√©rminos de b√∫squeda o"," ",e.jsx("button",{onClick:()=>{d(n),k(!1)},className:"text-cyan-400 hover:text-cyan-300 underline font-semibold transition-colors",children:"ver todos los productos"})]})]})}),f>1&&!b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center items-center mt-16 space-x-8",children:[e.jsx("button",{onClick:a,disabled:!p,className:`w-12 h-12 rounded-full border-2 transition-all duration-300 ${p?"border-white/50 text-white hover:bg-white/10 hover:border-white cursor-pointer":"border-white/20 text-white/30 cursor-not-allowed"}`,title:p?"P√°gina anterior":"No hay p√°gina anterior",children:e.jsx("span",{className:"text-2xl font-bold",children:"<"})}),e.jsxs("div",{className:"px-8 py-4 rounded-full bg-white/10 text-white border-2 border-white/30 font-semibold text-lg tracking-wide uppercase",children:["P√°gina ",l," de ",f]}),e.jsx("button",{onClick:C,disabled:!y,className:`w-12 h-12 rounded-full border-2 transition-all duration-300 ${y?"border-white/50 text-white hover:bg-white/10 hover:border-white cursor-pointer":"border-white/20 text-white/30 cursor-not-allowed"}`,title:y?"P√°gina siguiente":"No hay p√°gina siguiente",children:e.jsx("span",{className:"text-2xl font-bold",children:">"})})]}),e.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:Array.from({length:f},(r,t)=>e.jsx("button",{onClick:()=>m(t+1),className:`w-3 h-3 rounded-full transition-all duration-300 ${t+1===l?"bg-white":"bg-white/30 hover:bg-white/50"}`,title:`Ir a p√°gina ${t+1}`},t))})]})]}):e.jsx("div",{className:"text-white text-center py-16",children:e.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-12 max-w-lg mx-auto",children:[e.jsx("svg",{className:"w-20 h-20 text-gray-400 mx-auto mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"No hay productos disponibles"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Intenta recargar la p√°gina o contacta al administrador"})]})})})}export{_ as default};
